{"version":3,"file":"rakuten/index.js","mappings":"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","sources":["webpack://product-link-maker/./src/rakuten/edit.js","webpack://product-link-maker/./src/rakuten/editor.scss","webpack://product-link-maker/./src/rakuten/index.js","webpack://product-link-maker/./src/rakuten/style.scss","webpack://product-link-maker/external window [\"wp\",\"apiFetch\"]","webpack://product-link-maker/external window [\"wp\",\"blockEditor\"]","webpack://product-link-maker/external window [\"wp\",\"blocks\"]","webpack://product-link-maker/external window [\"wp\",\"components\"]","webpack://product-link-maker/external window [\"wp\",\"data\"]","webpack://product-link-maker/external window [\"wp\",\"element\"]","webpack://product-link-maker/external window [\"wp\",\"i18n\"]","webpack://product-link-maker/external window \"ReactJSXRuntime\"","webpack://product-link-maker/webpack/bootstrap","webpack://product-link-maker/webpack/runtime/chunk loaded","webpack://product-link-maker/webpack/runtime/compat get default export","webpack://product-link-maker/webpack/runtime/define property getters","webpack://product-link-maker/webpack/runtime/hasOwnProperty shorthand","webpack://product-link-maker/webpack/runtime/make namespace object","webpack://product-link-maker/webpack/runtime/jsonp chunk loading","webpack://product-link-maker/webpack/before-startup","webpack://product-link-maker/webpack/startup","webpack://product-link-maker/webpack/after-startup"],"sourcesContent":["import { __ } from '@wordpress/i18n';\nimport { useBlockProps, MediaUpload, InspectorControls, MediaUploadCheck } from '@wordpress/block-editor';\nimport { PanelBody, TextControl, ToggleControl, TextareaControl, FormTokenField, Button, Flex, __experimentalHeading as Heading, ColorPicker, Card, CardHeader, CardBody, Icon, Spinner } from '@wordpress/components';\n\n// import './style.scss';\nimport './editor.scss';\n\nimport { useEffect, useState, useRef, useCallback } from '@wordpress/element';\nimport apiFetch from '@wordpress/api-fetch';\nimport { useSelect } from '@wordpress/data';\n\n/**\n * 定数定義\n */\nconst DEFAULT_BUTTON_COLOR = '#2196f3';\nconst DEBOUNCE_DELAY = 1000;\n\n/**\n * 共通スタイル定義\n */\nconst COMMON_STYLES = {\n\tbuttonBase: {\n\t\tcolor: '#fff',\n\t\tborderRadius: '3px',\n\t\tpadding: '8px 16px',\n\t\tdisplay: 'inline-flex',\n\t\talignItems: 'center',\n\t\tjustifyContent: 'center',\n\t\ttextDecoration: 'none',\n\t\tfontSize: '15px',\n\t\tfontWeight: '600',\n\t\twhiteSpace: 'nowrap',\n\t\tminWidth: '85px',\n\t\tboxShadow: '0 1px 3px rgba(0, 0, 0, 0.1)'\n\t},\n\tstatusBox: {\n\t\tpadding: '32px',\n\t\ttextAlign: 'center',\n\t\tborderRadius: '4px'\n\t}\n};\n\n/**\n * カスタムボタンコンポーネント（再利用可能）\n */\nfunction CustomButtonEditor({ buttons, onChange, label }) {\n\treturn (\n\t\t<>\n\t\t\t<p style={{ fontSize: '13px', color: '#757575', marginTop: 0 }}>\n\t\t\t\t{label}\n\t\t\t</p>\n\t\t\t{buttons.map((btn, index) => (\n\t\t\t\t<Card key={index} style={{ marginBottom: '16px', border: '1px solid #ddd' }}>\n\t\t\t\t\t<CardHeader>\n\t\t\t\t\t\t<Flex justify=\"space-between\" align=\"center\">\n\t\t\t\t\t\t\t<span style={{ fontWeight: 600 }}>ボタン {index + 1}</span>\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tisDestructive\n\t\t\t\t\t\t\t\tisSmall\n\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\tconst newButtons = [...buttons];\n\t\t\t\t\t\t\t\t\tnewButtons.splice(index, 1);\n\t\t\t\t\t\t\t\t\tonChange(newButtons);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\ticon=\"trash\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Flex>\n\t\t\t\t\t</CardHeader>\n\t\t\t\t\t<CardBody>\n\t\t\t\t\t\t<TextControl\n\t\t\t\t\t\t\tlabel=\"ボタンテキスト\"\n\t\t\t\t\t\t\tvalue={btn.text || ''}\n\t\t\t\t\t\t\tonChange={(val) => {\n\t\t\t\t\t\t\t\tconst newButtons = [...buttons];\n\t\t\t\t\t\t\t\tnewButtons[index] = { ...newButtons[index], text: val };\n\t\t\t\t\t\t\t\tonChange(newButtons);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tplaceholder=\"例: 公式サイト\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<TextControl\n\t\t\t\t\t\t\tlabel=\"リンクURL\"\n\t\t\t\t\t\t\tvalue={btn.url || ''}\n\t\t\t\t\t\t\tonChange={(val) => {\n\t\t\t\t\t\t\t\tconst newButtons = [...buttons];\n\t\t\t\t\t\t\t\tnewButtons[index] = { ...newButtons[index], url: val };\n\t\t\t\t\t\t\t\tonChange(newButtons);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tplaceholder=\"https://example.com\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\t\tlabel=\"別タブで開く\"\n\t\t\t\t\t\t\tchecked={btn.openInNewTab !== false}\n\t\t\t\t\t\t\tonChange={(val) => {\n\t\t\t\t\t\t\t\tconst newButtons = [...buttons];\n\t\t\t\t\t\t\t\tnewButtons[index] = { ...newButtons[index], openInNewTab: val };\n\t\t\t\t\t\t\t\tonChange(newButtons);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<div style={{ marginTop: '12px' }}>\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tvariant=\"secondary\"\n\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\tconst newButtons = [...buttons];\n\t\t\t\t\t\t\t\t\tnewButtons[index] = {\n\t\t\t\t\t\t\t\t\t\t...newButtons[index],\n\t\t\t\t\t\t\t\t\t\tshowColorPicker: !newButtons[index].showColorPicker\n\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\tonChange(newButtons);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tstyle={{ width: '100%', marginBottom: '8px' }}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{btn.showColorPicker ? '色を選択中' : 'ボタンの色を選択'}\n\t\t\t\t\t\t\t\t<span style={{\n\t\t\t\t\t\t\t\t\tmarginLeft: '8px',\n\t\t\t\t\t\t\t\t\twidth: '20px',\n\t\t\t\t\t\t\t\t\theight: '20px',\n\t\t\t\t\t\t\t\t\tbackgroundColor: btn.color || DEFAULT_BUTTON_COLOR,\n\t\t\t\t\t\t\t\t\tdisplay: 'inline-block',\n\t\t\t\t\t\t\t\t\tborderRadius: '3px',\n\t\t\t\t\t\t\t\t\tborder: '1px solid #ddd',\n\t\t\t\t\t\t\t\t\tverticalAlign: 'middle'\n\t\t\t\t\t\t\t\t}} />\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t{btn.showColorPicker && (\n\t\t\t\t\t\t\t\t<ColorPicker\n\t\t\t\t\t\t\t\t\tcolor={btn.color || DEFAULT_BUTTON_COLOR}\n\t\t\t\t\t\t\t\t\tonChange={(val) => {\n\t\t\t\t\t\t\t\t\t\tconst newButtons = [...buttons];\n\t\t\t\t\t\t\t\t\t\tnewButtons[index] = { ...newButtons[index], color: val };\n\t\t\t\t\t\t\t\t\t\tonChange(newButtons);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tenableAlpha\n\t\t\t\t\t\t\t\t\tdefaultValue={DEFAULT_BUTTON_COLOR}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</CardBody>\n\t\t\t\t</Card>\n\t\t\t))}\n\t\t\t<Button\n\t\t\t\tvariant=\"secondary\"\n\t\t\t\tonClick={() => {\n\t\t\t\t\tconst newButtons = [...buttons, {\n\t\t\t\t\t\ttext: '',\n\t\t\t\t\t\turl: '',\n\t\t\t\t\t\topenInNewTab: true,\n\t\t\t\t\t\tcolor: DEFAULT_BUTTON_COLOR\n\t\t\t\t\t}];\n\t\t\t\t\tonChange(newButtons);\n\t\t\t\t}}\n\t\t\t\ticon=\"plus\"\n\t\t\t\tstyle={{ width: '100%', justifyContent: 'center' }}\n\t\t\t>\n\t\t\t\tボタンを追加\n\t\t\t</Button>\n\t\t</>\n\t);\n}\n\n/**\n * ショップボタンのスタイル定義\n */\nconst BUTTON_STYLES = {\n\tamazon: { backgroundColor: '#ff9900', text: 'Amazon' },\n\trakuten: { backgroundColor: '#bf0000', text: '楽天市場' },\n\tyahoo: { backgroundColor: '#ff0033', text: 'Yahoo!ショッピング' },\n\tmercari: { backgroundColor: '#4dc9ff', text: 'メルカリ' },\n\tdmm: { backgroundColor: '#00bcd4', text: 'DMM' }\n};\n\n/**\n * カスタムボタンレンダリング\n */\nfunction renderCustomButton(btn, keyPrefix, idx) {\n\tif (!btn.text || !btn.url) return null;\n\n\treturn (\n\t\t<div className=\"plm-shop-custom\" key={`${keyPrefix}-${idx}`}>\n\t\t\t<a\n\t\t\t\trel=\"nofollow noopener\"\n\t\t\t\thref={btn.url}\n\t\t\t\ttarget={btn.openInNewTab !== false ? \"_blank\" : \"_self\"}\n\t\t\t\tstyle={{\n\t\t\t\t\t...COMMON_STYLES.buttonBase,\n\t\t\t\t\tbackgroundColor: btn.color || DEFAULT_BUTTON_COLOR\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t{btn.text}\n\t\t\t</a>\n\t\t</div>\n\t);\n}\n\n/**\n * ショップボタンレンダリング\n */\nfunction renderShopButton(shopKey, url, style) {\n\treturn (\n\t\t<div className={`plm-shop-${shopKey}`} key={shopKey}>\n\t\t\t<a\n\t\t\t\trel=\"nofollow noopener\"\n\t\t\t\thref={url}\n\t\t\t\ttarget=\"_blank\"\n\t\t\t\tstyle={{\n\t\t\t\t\t...COMMON_STYLES.buttonBase,\n\t\t\t\t\tbackgroundColor: style.backgroundColor\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t{style.text}\n\t\t\t</a>\n\t\t</div>\n\t);\n}\n\n/**\n * ステータスメッセージコンポーネント\n */\nfunction StatusMessage({ type, message }) {\n\tconst styles = {\n\t\tloading: {\n\t\t\t...COMMON_STYLES.statusBox,\n\t\t\tcolor: '#888',\n\t\t\tbackgroundColor: '#f5f5f5',\n\t\t\tborder: '1px dashed #ccc',\n\t\t\tdisplay: 'flex',\n\t\t\talignItems: 'center',\n\t\t\tgap: '8px'\n\t\t},\n\t\terror: {\n\t\t\t...COMMON_STYLES.statusBox,\n\t\t\tcolor: '#d63638',\n\t\t\tbackgroundColor: '#fff0f0',\n\t\t\tborder: '1px solid #d63638'\n\t\t},\n\t\tempty: {\n\t\t\t...COMMON_STYLES.statusBox,\n\t\t\tcolor: '#666',\n\t\t\tbackgroundColor: '#f5f5f5',\n\t\t\tborder: '1px dashed #ccc'\n\t\t}\n\t};\n\n\treturn (\n\t\t<div style={styles[type]}>\n\t\t\t{type === 'loading' && <Spinner />}\n\t\t\t{message}\n\t\t</div>\n\t);\n}\n\n/**\n * 全ボタンをレンダリングする関数\n */\nfunction renderAllButtons(attributes) {\n\tconst kwArray = attributes.kw.split(',').map(s => s.trim()).filter(Boolean);\n\tconst kwForUrl = kwArray.join(' ');\n\tconst settings = window.ProductLinkMakerSettings || {};\n\tconst buttons = [];\n\n\t// カスタムボタン（前）\n\t(attributes.customButtonsBefore || []).forEach((btn, idx) => {\n\t\tconst customBtn = renderCustomButton(btn, 'custom-before', idx);\n\t\tif (customBtn) buttons.push(customBtn);\n\t});\n\n\t// ショップボタン\n\tif (settings.amazon && attributes.showAmazon !== false) {\n\t\tbuttons.push(renderShopButton('amazon', `https://www.amazon.co.jp/gp/search?keywords=${encodeURIComponent(kwForUrl)}`, BUTTON_STYLES.amazon));\n\t}\n\tif (settings.rakuten && attributes.showRakuten !== false) {\n\t\tbuttons.push(renderShopButton('rakuten', `https://search.rakuten.co.jp/search/mall/${encodeURIComponent(kwForUrl)}/`, BUTTON_STYLES.rakuten));\n\t}\n\tif (settings.yahoo && attributes.showYahoo !== false) {\n\t\tbuttons.push(renderShopButton('yahoo', `https://search.shopping.yahoo.co.jp/search?p=${encodeURIComponent(kwForUrl)}`, BUTTON_STYLES.yahoo));\n\t}\n\tif (settings.mercari && attributes.showMercari !== false) {\n\t\tbuttons.push(renderShopButton('mercari', `https://jp.mercari.com/search?keyword=${encodeURIComponent(kwForUrl)}`, BUTTON_STYLES.mercari));\n\t}\n\tif (settings.dmm && attributes.showDmm !== false) {\n\t\t// DMM: キーワード設定を使用\n\t\tconst dmmUrl = `https://al.dmm.com/?lurl=https%3A%2F%2Fwww.dmm.com%2Fsearch%2F%3D%2Fsearchstr%3D${encodeURIComponent(kwForUrl)}%2Fanalyze%3DV1ECCVYAUQQ_%2Flimit%3D30%2Fsort%3Drankprofile%2F&af_id=dummy&ch=link_tool&ch_id=link`;\n\t\tbuttons.push(renderShopButton('dmm', dmmUrl, BUTTON_STYLES.dmm));\n\t}\n\n\t// カスタムボタン（後）\n\t(attributes.customButtonsAfter || []).forEach((btn, idx) => {\n\t\tconst customBtn = renderCustomButton(btn, 'custom-after', idx);\n\t\tif (customBtn) buttons.push(customBtn);\n\t});\n\n\treturn buttons;\n}\n\n/**\n * プレビューコンポーネント\n */\nfunction ProductPreview({ attributes, item, imageUrl, imageKey, itemTitle, itemLink }) {\n\treturn (\n\t\t<div className=\"plm-product-box\">\n\t\t\t<figure className=\"plm-product-thumb\">\n\t\t\t\t<a rel=\"nofollow noopener\"\n\t\t\t\t\thref={itemLink}\n\t\t\t\t\tclassName=\"plm-product-thumb-link\"\n\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\ttitle={itemTitle}\n\t\t\t\t>\n\t\t\t\t\t{imageUrl && (\n\t\t\t\t\t\t<img\n\t\t\t\t\t\t\tkey={imageKey}\n\t\t\t\t\t\t\tdecoding=\"async\"\n\t\t\t\t\t\t\tsrc={imageUrl}\n\t\t\t\t\t\t\talt={itemTitle || '商品画像'}\n\t\t\t\t\t\t\twidth=\"128\"\n\t\t\t\t\t\t\theight=\"128\"\n\t\t\t\t\t\t\tclassName=\"plm-product-thumb-image\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t</a>\n\t\t\t</figure>\n\t\t\t<div className=\"plm-product-content\">\n\t\t\t\t<div className=\"plm-product-title\">\n\t\t\t\t\t<a rel=\"nofollow noopener\"\n\t\t\t\t\t\thref={itemLink}\n\t\t\t\t\t\tclassName=\"plm-product-title-link\"\n\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\ttitle={itemTitle}\n\t\t\t\t\t>\n\t\t\t\t\t\t{itemTitle ? itemTitle : ''}\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"plm-product-snippet\">\n\t\t\t\t\t{attributes.showShop !== false && (item?.shopName || attributes.shop) && (\n\t\t\t\t\t\t<div className=\"plm-product-maker\">\n\t\t\t\t\t\t\t{item?.shopName || attributes.shop}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t\t{attributes.price && (\n\t\t\t\t\t\t<div className=\"plm-product-price\">\n\t\t\t\t\t\t\t<span className=\"plm-price-value\">\n\t\t\t\t\t\t\t\t{item?.itemPrice ? `￥ ${Number(item.itemPrice).toLocaleString('ja-JP')}` : '価格情報なし'}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<span className=\"acquired-date\">\n\t\t\t\t\t\t\t\t{item?.itemPrice ? `（${new Date().toLocaleDateString()} 時点）` : ''}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t\t{attributes.desc && (\n\t\t\t\t\t\t<div className=\"plm-product-description\">{attributes.desc}</div>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t\t<div className=\"plm-product-buttons\">\n\t\t\t\t\t{attributes.kw && attributes.kw.split(',').filter(Boolean).length > 0 && renderAllButtons(attributes)}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport default function Edit({ attributes, setAttributes }) {\n\tconst [item, setItem] = useState(null);\n\tconst [isLoading, setIsLoading] = useState(true); // 初期状態をtrueに変更\n\tconst [error, setError] = useState(null);\n\tconst [isClearingCache, setIsClearingCache] = useState(false);\n\tconst [hasInitialized, setHasInitialized] = useState(false); // 初回取得完了フラグ\n\tconst fetchTimeoutRef = useRef(null);\n\tconst isInitialLoadRef = useRef(true); // 初回ロードを追跡するRef\n\n\t// 現在の投稿IDを取得\n\tconst postId = useSelect((select) => {\n\t\tconst editor = select('core/editor');\n\t\treturn editor ? editor.getCurrentPostId() : null;\n\t}, []);\n\n\tconst fetchData = useCallback(async () => {\n\t\tif (!attributes.id && !attributes.no && !attributes.kw) {\n\t\t\tsetItem(null);\n\t\t\tsetAttributes(prev => ({ ...prev, imageUrl: '' }));\n\t\t\tsetIsLoading(false);\n\t\t\tsetHasInitialized(true);\n\t\t\treturn;\n\t\t}\n\t\tsetIsLoading(true);\n\t\tsetError(null);\n\t\ttry {\n\t\t\t// キャッシュ削除は行わず、常にキャッシュを利用する\n\t\t\tconst queryParams = new URLSearchParams({\n\t\t\t\tid: attributes.id || '',\n\t\t\t\tkw: attributes.kw || '',\n\t\t\t\tno: attributes.no || '',\n\t\t\t\tpost_id: postId || ''\n\t\t\t});\n\t\t\tconst data = await apiFetch({\n\t\t\t\tpath: `/product-link-maker/v1/rakuten/?${queryParams.toString()}`\n\t\t\t});\n\n\t\t\tif (data && data.items && data.items.length > 0) {\n\t\t\t\t// 正常にデータを取得できた場合\n\t\t\t\tsetItem(data.items[0]);\n\t\t\t\tsetAttributes(prev => ({\n\t\t\t\t\t...prev,\n\t\t\t\t\timageUrl: data.items[0]?.Item?.mediumImageUrls?.[0]?.imageUrl || ''\n\t\t\t\t}));\n\t\t\t} else if (data?.error) {\n\t\t\t\t// APIエラーレスポンス\n\t\t\t\tsetItem(null);\n\t\t\t\tsetAttributes(prev => ({ ...prev, imageUrl: '' }));\n\t\t\t\tsetError('APIエラー: ' + (data.error_description || 'リクエスト制限に達しました。しばらく待ってから再度お試しください。'));\n\n\t\t\t\t// エラーログに記録（rate_limit以外、かつID/キーワードが入力されている場合）\n\t\t\t\tif (data.error !== 'rate_limit' && (attributes.id || attributes.kw || attributes.no)) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tawait apiFetch({\n\t\t\t\t\t\t\tpath: '/product-link-maker/v1/log-client-error/',\n\t\t\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\terror_type: data.error,\n\t\t\t\t\t\t\t\terror_message: data.error_description || data.error,\n\t\t\t\t\t\t\t\tpost_id: postId,\n\t\t\t\t\t\t\t\titem_id: attributes.id || '',\n\t\t\t\t\t\t\t\tkeyword: attributes.kw || attributes.no || '',\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t} catch (logError) {\n\t\t\t\t\t\t// エラーログの記録に失敗しても処理は継続\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// データなし（商品が見つからない等）\n\t\t\t\tsetItem(null);\n\t\t\t\tsetAttributes(prev => ({ ...prev, imageUrl: '' }));\n\t\t\t\tsetError('データが取得できませんでした');\n\n\t\t\t\t// このケースもエラーログに記録（ID/キーワードが入力されている場合のみ）\n\t\t\t\tif (attributes.id || attributes.kw || attributes.no) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tawait apiFetch({\n\t\t\t\t\t\t\tpath: '/product-link-maker/v1/log-client-error/',\n\t\t\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\terror_type: 'no_data',\n\t\t\t\t\t\t\t\terror_message: 'データが取得できませんでした。商品IDまたはキーワードが正しいか確認してください。',\n\t\t\t\t\t\t\t\tpost_id: postId,\n\t\t\t\t\t\t\t\titem_id: attributes.id || '',\n\t\t\t\t\t\t\t\tkeyword: attributes.kw || attributes.no || '',\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t} catch (logError) {\n\t\t\t\t\t\t// エラーログの記録に失敗しても処理は継続\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tsetItem(null);\n\t\t\tsetAttributes(prev => ({ ...prev, imageUrl: '' }));\n\t\t\tsetError('APIエラーが発生しました。しばらく待ってから再度お試しください。');\n\n\t\t\t// 例外もエラーログに記録（ID/キーワードが入力されている場合のみ）\n\t\t\tif (attributes.id || attributes.kw || attributes.no) {\n\t\t\t\ttry {\n\t\t\t\t\tawait apiFetch({\n\t\t\t\t\t\tpath: '/product-link-maker/v1/log-client-error/',\n\t\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\terror_type: 'fetch_exception',\n\t\t\t\t\t\t\terror_message: 'API取得中に例外が発生: ' + (error.message || error.toString()),\n\t\t\t\t\t\t\tpost_id: postId,\n\t\t\t\t\t\t\titem_id: attributes.id || '',\n\t\t\t\t\t\t\tkeyword: attributes.kw || attributes.no || '',\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t} catch (logError) {\n\t\t\t\t\t// エラーログの記録に失敗しても処理は継続\n\t\t\t\t}\n\t\t\t}\n\t\t} finally {\n\t\t\tsetIsLoading(false);\n\t\t\tsetHasInitialized(true);\n\t\t\t// 初回ロード完了後、フラグを更新\n\t\t\tif (isInitialLoadRef.current) {\n\t\t\t\tisInitialLoadRef.current = false;\n\t\t\t}\n\t\t}\n\t}, [attributes.id, attributes.no, attributes.kw, postId, setAttributes]);\n\n\t// キャッシュを削除して再取得する関数\n\tconst handleClearCache = useCallback(async () => {\n\t\tif (!window.confirm('キャッシュを削除して最新データを取得しますか？')) {\n\t\t\treturn;\n\t\t}\n\t\tsetIsClearingCache(true);\n\t\ttry {\n\t\t\tawait apiFetch({\n\t\t\t\tpath: '/product-link-maker/v1/rakuten-cache/',\n\t\t\t\tmethod: 'POST',\n\t\t\t\tdata: {\n\t\t\t\t\tid: attributes.id,\n\t\t\t\t\tkw: attributes.kw,\n\t\t\t\t\tno: attributes.no,\n\t\t\t\t},\n\t\t\t});\n\t\t\t// キャッシュ削除後、再取得\n\t\t\tawait fetchData();\n\t\t} catch (error) {\n\t\t\tconsole.error('Cache clear error:', error);\n\t\t\talert('キャッシュ削除中にエラーが発生しました。');\n\t\t} finally {\n\t\t\tsetIsClearingCache(false);\n\t\t}\n\t}, [attributes.id, attributes.kw, attributes.no, fetchData]);\n\n\t// attributesがあれば必ずfetchDataを呼ぶ（デバウンス付き）\n\tuseEffect(() => {\n\t\t// 前回のタイマーをクリア\n\t\tif (fetchTimeoutRef.current) {\n\t\t\tclearTimeout(fetchTimeoutRef.current);\n\t\t}\n\n\t\tif (attributes.id || attributes.no || attributes.kw) {\n\t\t\t// デバウンスを追加\n\t\t\tfetchTimeoutRef.current = setTimeout(() => {\n\t\t\t\tfetchData();\n\t\t\t}, DEBOUNCE_DELAY);\n\t\t} else {\n\t\t\tsetItem(null);\n\t\t\tsetIsLoading(false);\n\t\t\tsetHasInitialized(true);\n\t\t}\n\n\t\t// クリーンアップ\n\t\treturn () => {\n\t\t\tif (fetchTimeoutRef.current) {\n\t\t\t\tclearTimeout(fetchTimeoutRef.current);\n\t\t\t}\n\t\t};\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, [attributes.id, attributes.no, attributes.kw]);\n\n\t// 画像・リンク・タイトル等をAPIデータ優先で差し替え\n\tconst [imageKey, setImageKey] = useState(0);\n\tconst imageUrl = attributes.imageUrl || (item && item.mediumImageUrls && item.mediumImageUrls[0] ? item.mediumImageUrls[0].imageUrl : '');\n\tuseEffect(() => {\n\t\tsetImageKey(k => k + 1);\n\t}, [imageUrl]);\n\tconst itemTitle = attributes.title || (item ? item.itemName : '');\n\tconst itemLink = item ? (item.affiliateUrl || item.itemUrl || '#') : '#';\n\n\treturn (\n\t\t<>\n\t\t\t<InspectorControls>\n\t\t\t\t<PanelBody title={__('商品情報設定', 'product-link-maker')} initialOpen={true}>\n\t\t\t\t\t<TextControl\n\t\t\t\t\t\tlabel={__('アイテムコード（ID）', 'product-link-maker')}\n\t\t\t\t\t\thelp={attributes.no ? __('商品番号が入力されている場合は入力できません', 'product-link-maker') : ''}\n\t\t\t\t\t\tvalue={attributes.id}\n\t\t\t\t\t\tdisabled={!!attributes.no}\n\t\t\t\t\t\tonChange={(val) => {\n\t\t\t\t\t\t\tsetAttributes({ id: val, no: '' }); // 入力時にnoをクリア\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tplaceholder=\"book:11830886\"\n\t\t\t\t\t\tstyle={attributes.no ? { backgroundColor: '#f5f5f5', color: '#aaa' } : {}}\n\t\t\t\t\t/>\n\t\t\t\t\t<TextControl\n\t\t\t\t\t\tlabel={__('商品番号', 'product-link-maker')}\n\t\t\t\t\t\thelp={attributes.id ? __('アイテムコード（ID）が入力されている場合は入力できません', 'product-link-maker') : ''}\n\t\t\t\t\t\tvalue={attributes.no}\n\t\t\t\t\t\tdisabled={!!attributes.id}\n\t\t\t\t\t\tonChange={(val) => {\n\t\t\t\t\t\t\tsetAttributes({ no: val, id: '' }); // 入力時にidをクリア\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tplaceholder=\"4902102072625\"\n\t\t\t\t\t\tstyle={attributes.id ? { backgroundColor: '#f5f5f5', color: '#aaa' } : {}}\n\t\t\t\t\t/>\n\t\t\t\t\t<FormTokenField\n\t\t\t\t\t\tlabel={__('キーワード指定', 'product-link-maker')}\n\t\t\t\t\t\tvalue={attributes.kw ? attributes.kw.split(',').filter(Boolean) : []}\n\t\t\t\t\t\tonChange={(tokens) => setAttributes({ kw: tokens.join(',') })}\n\t\t\t\t\t\tplaceholder={__('キーワードを入力してEnter', 'product-link-maker')}\n\t\t\t\t\t/>\n\t\t\t\t\t<TextControl\n\t\t\t\t\t\tlabel={__('ショップコード', 'product-link-maker')}\n\t\t\t\t\t\tvalue={attributes.shop}\n\t\t\t\t\t\tonChange={(val) => setAttributes({ shop: val })}\n\t\t\t\t\t/>\n\t\t\t\t\t<FormTokenField\n\t\t\t\t\t\tlabel={__('サーチ', 'product-link-maker')}\n\t\t\t\t\t\tvalue={attributes.search ? attributes.search.split(',').filter(Boolean) : []}\n\t\t\t\t\t\tonChange={(tokens) => setAttributes({ search: tokens.join(',') })}\n\t\t\t\t\t\tplaceholder={__('サーチを入力してEnter', 'product-link-maker')}\n\t\t\t\t\t/>\n\t\t\t\t\t<TextareaControl\n\t\t\t\t\t\tlabel={__('タイトル', 'product-link-maker')}\n\t\t\t\t\t\tvalue={attributes.title}\n\t\t\t\t\t\tonChange={(val) => setAttributes({ title: val })}\n\t\t\t\t\t/>\n\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\tlabel={__('店名表示', 'product-link-maker')}\n\t\t\t\t\t\tchecked={attributes.showShop !== false}\n\t\t\t\t\t\tonChange={(val) => setAttributes({ showShop: val })}\n\t\t\t\t\t/>\n\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\tlabel={__('価格表示', 'product-link-maker')}\n\t\t\t\t\t\tchecked={attributes.price}\n\t\t\t\t\t\tonChange={(val) => setAttributes({ price: val })}\n\t\t\t\t\t/>\n\t\t\t\t\t<TextareaControl\n\t\t\t\t\t\tlabel={__('説明文', 'product-link-maker')}\n\t\t\t\t\t\tvalue={attributes.desc}\n\t\t\t\t\t\tonChange={(val) => setAttributes({ desc: val })}\n\t\t\t\t\t/>\n\t\t\t\t\t<Heading>画像アップロード</Heading>\n\t\t\t\t\t<MediaUploadCheck>\n\t\t\t\t\t\t<div style={{ marginBottom: '0' }}>\n\t\t\t\t\t\t\t{(attributes.imageUrl !== '' ? attributes.imageUrl : item?.mediumImageUrls?.[0]?.imageUrl) && (\n\t\t\t\t\t\t\t\t<div style={{ marginBottom: '10px', display: 'flex', justifyContent: 'center', backgroundColor: '#eee' }}>\n\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\tsrc={attributes.imageUrl !== '' ? attributes.imageUrl : item?.mediumImageUrls?.[0]?.imageUrl}\n\t\t\t\t\t\t\t\t\t\talt=\"\"\n\t\t\t\t\t\t\t\t\t\tstyle={{ display: 'block' }}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t<MediaUpload\n\t\t\t\t\t\t\t\tonSelect={(media) => setAttributes({ imageUrl: media.url || '' })}\n\t\t\t\t\t\t\t\tallowedTypes={['image']}\n\t\t\t\t\t\t\t\trender={({ open }) => (\n\t\t\t\t\t\t\t\t\t<Flex>\n\t\t\t\t\t\t\t\t\t\t<Button onClick={open} variant=\"secondary\">\n\t\t\t\t\t\t\t\t\t\t\t画像を選択\n\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t{attributes.imageUrl && (\n\t\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\t\tstyle={{ marginTop: 4 }}\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => setAttributes({ imageUrl: '' })}\n\t\t\t\t\t\t\t\t\t\t\t\tisDestructive\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t{__('画像をリセット', 'product-link-maker')}\n\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t</Flex>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</MediaUploadCheck>\n\n\t\t\t\t\t<div style={{ margin: '24px 0 0 0' }} />\n\t\t\t\t\t<Heading>ボタン表示設定</Heading>\n\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\tlabel={__('Amazonボタンを表示', 'product-link-maker')}\n\t\t\t\t\t\tchecked={attributes.showAmazon !== false}\n\t\t\t\t\t\tonChange={val => setAttributes({ showAmazon: val })}\n\t\t\t\t\t/>\n\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\tlabel={__('楽天ボタンを表示', 'product-link-maker')}\n\t\t\t\t\t\tchecked={attributes.showRakuten !== false}\n\t\t\t\t\t\tonChange={val => setAttributes({ showRakuten: val })}\n\t\t\t\t\t/>\n\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\tlabel={__('Yahoo!ボタンを表示', 'product-link-maker')}\n\t\t\t\t\t\tchecked={attributes.showYahoo !== false}\n\t\t\t\t\t\tonChange={val => setAttributes({ showYahoo: val })}\n\t\t\t\t\t/>\n\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\tlabel={__('メルカリボタンを表示', 'product-link-maker')}\n\t\t\t\t\t\tchecked={attributes.showMercari !== false}\n\t\t\t\t\t\tonChange={val => setAttributes({ showMercari: val })}\n\t\t\t\t\t/>\n\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\tlabel={__('DMMボタンを表示', 'product-link-maker')}\n\t\t\t\t\t\tchecked={attributes.showDmm !== false}\n\t\t\t\t\t\tonChange={val => setAttributes({ showDmm: val })}\n\t\t\t\t\t/>\n\n\t\t\t\t</PanelBody>\n\t\t\t\t<PanelBody title={__('カスタムボタン（前）', 'product-link-maker')} initialOpen={true}>\n\t\t\t\t\t<CustomButtonEditor\n\t\t\t\t\t\tbuttons={attributes.customButtonsBefore || []}\n\t\t\t\t\t\tonChange={(newButtons) => setAttributes({ customButtonsBefore: newButtons })}\n\t\t\t\t\t\tlabel=\"既存のボタンの前に表示されるカスタムボタンを追加できます\"\n\t\t\t\t\t/>\n\t\t\t\t</PanelBody>\n\t\t\t\t<PanelBody title={__('カスタムボタン（後）', 'product-link-maker')} initialOpen={true}>\n\t\t\t\t\t<CustomButtonEditor\n\t\t\t\t\t\tbuttons={attributes.customButtonsAfter || []}\n\t\t\t\t\t\tonChange={(newButtons) => setAttributes({ customButtonsAfter: newButtons })}\n\t\t\t\t\t\tlabel=\"既存のボタンの後に表示されるカスタムボタンを追加できます\"\n\t\t\t\t\t/>\n\t\t\t\t</PanelBody>\n\t\t\t\t<PanelBody title={__('アフィリエイト設定', 'product-link-maker')} initialOpen={false}>\n\t\t\t\t\t<Button\n\t\t\t\t\t\thref={`${window.location.origin}/wp-admin/options-general.php?page=product-link-maker`}\n\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\tclassName=\"\"\n\t\t\t\t\t\tvariant=\"primary\"\n\t\t\t\t\t\ticon=\"admin-generic\"\n\t\t\t\t\t\tstyle={{ marginTop: '5px', width: '100%', textAlign: 'center' }}\n\t\t\t\t\t>\n\t\t\t\t\t\t{__('アフィリエイト設定', 'product-link-maker')}\n\t\t\t\t\t</Button>\n\t\t\t\t</PanelBody>\n\t\t\t</InspectorControls>\n\t\t\t<div {...useBlockProps()}>\n\t\t\t\t{isLoading ? (\n\t\t\t\t\t<StatusMessage type=\"loading\" message=\"Loading...\" />\n\t\t\t\t) : error ? (\n\t\t\t\t\t<StatusMessage type=\"error\" message={error} />\n\t\t\t\t) : !attributes.id && !attributes.no && !attributes.kw ? (\n\t\t\t\t\t<StatusMessage type=\"empty\" message=\"商品情報を設定してください\" />\n\t\t\t\t) : !hasInitialized || (!item && (attributes.id || attributes.no)) ? (\n\t\t\t\t\t<StatusMessage type=\"loading\" message=\"Loading...\" />\n\t\t\t\t) : (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<ProductPreview\n\t\t\t\t\t\t\tattributes={attributes}\n\t\t\t\t\t\t\titem={item}\n\t\t\t\t\t\t\timageUrl={imageUrl}\n\t\t\t\t\t\t\timageKey={imageKey}\n\t\t\t\t\t\t\titemTitle={itemTitle}\n\t\t\t\t\t\t\titemLink={itemLink}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t{item && (\n\t\t\t\t\t\t\t<div className=\"plm-admin-info\">\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\tvariant=\"secondary\"\n\t\t\t\t\t\t\t\t\tonClick={handleClearCache}\n\t\t\t\t\t\t\t\t\tdisabled={isClearingCache}\n\t\t\t\t\t\t\t\t\tisBusy={isClearingCache}\n\t\t\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{isClearingCache ? '削除中...' : 'キャッシュ更新'}\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t{item?.affiliateRate && (\n\t\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t\t料率: {item.affiliateRate}%\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t</>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport {};","/**\n * Registers a new block provided a unique name and an object defining its behavior.\n *\n * @see https://developer.wordpress.org/block-editor/reference-guides/block-api/block-registration/\n */\nimport { registerBlockType } from '@wordpress/blocks';\n\n/**\n * Lets webpack process CSS, SASS or SCSS files referenced in JavaScript files.\n * All files containing `style` keyword are bundled together. The code used\n * gets applied both to the front of your site and to the editor.\n *\n * @see https://www.npmjs.com/package/@wordpress/scripts#using-css\n */\nimport './style.scss';\n\n/**\n * Internal dependencies\n */\nimport Edit from './edit';\nimport metadata from './block.json';\n\n/**\n * Every block starts by registering a new block type definition.\n *\n * @see https://developer.wordpress.org/block-editor/reference-guides/block-api/block-registration/\n */\nregisterBlockType(metadata.name, {\n\t/**\n\t * @see ./edit.js\n\t */\n\tedit: Edit,\n});\n","// extracted by mini-css-extract-plugin\nexport {};","module.exports = window[\"wp\"][\"apiFetch\"];","module.exports = window[\"wp\"][\"blockEditor\"];","module.exports = window[\"wp\"][\"blocks\"];","module.exports = window[\"wp\"][\"components\"];","module.exports = window[\"wp\"][\"data\"];","module.exports = window[\"wp\"][\"element\"];","module.exports = window[\"wp\"][\"i18n\"];","module.exports = window[\"ReactJSXRuntime\"];","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t\"rakuten/index\": 0,\n\t\"rakuten/style-index\": 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = globalThis[\"webpackChunkproduct_link_maker\"] = globalThis[\"webpackChunkproduct_link_maker\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [\"rakuten/style-index\"], () => (__webpack_require__(\"./src/rakuten/index.js\")))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n",""],"names":["__","useBlockProps","MediaUpload","InspectorControls","MediaUploadCheck","PanelBody","TextControl","ToggleControl","TextareaControl","FormTokenField","Button","Flex","__experimentalHeading","Heading","ColorPicker","Card","CardHeader","CardBody","Icon","Spinner","useEffect","useState","useRef","useCallback","apiFetch","useSelect","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","DEFAULT_BUTTON_COLOR","DEBOUNCE_DELAY","COMMON_STYLES","buttonBase","color","borderRadius","padding","display","alignItems","justifyContent","textDecoration","fontSize","fontWeight","whiteSpace","minWidth","boxShadow","statusBox","textAlign","CustomButtonEditor","buttons","onChange","label","children","style","marginTop","map","btn","index","marginBottom","border","justify","align","isDestructive","isSmall","onClick","newButtons","splice","icon","value","text","val","placeholder","url","checked","openInNewTab","variant","showColorPicker","width","marginLeft","height","backgroundColor","verticalAlign","enableAlpha","defaultValue","BUTTON_STYLES","amazon","rakuten","yahoo","mercari","dmm","renderCustomButton","keyPrefix","idx","className","rel","href","target","renderShopButton","shopKey","StatusMessage","type","message","styles","loading","gap","error","empty","renderAllButtons","attributes","kwArray","kw","split","s","trim","filter","Boolean","kwForUrl","join","settings","window","ProductLinkMakerSettings","customButtonsBefore","forEach","customBtn","push","showAmazon","encodeURIComponent","showRakuten","showYahoo","showMercari","showDmm","dmmUrl","customButtonsAfter","ProductPreview","item","imageUrl","imageKey","itemTitle","itemLink","title","decoding","src","alt","showShop","shopName","shop","price","itemPrice","Number","toLocaleString","Date","toLocaleDateString","desc","length","Edit","setAttributes","setItem","isLoading","setIsLoading","setError","isClearingCache","setIsClearingCache","hasInitialized","setHasInitialized","fetchTimeoutRef","isInitialLoadRef","postId","select","editor","getCurrentPostId","fetchData","id","no","prev","queryParams","URLSearchParams","post_id","data","path","toString","items","Item","mediumImageUrls","error_description","method","error_type","error_message","item_id","keyword","logError","current","handleClearCache","confirm","console","alert","clearTimeout","setTimeout","setImageKey","k","itemName","affiliateUrl","itemUrl","initialOpen","help","disabled","tokens","search","onSelect","media","allowedTypes","render","open","margin","location","origin","isBusy","size","affiliateRate","registerBlockType","metadata","name","edit"],"sourceRoot":""}