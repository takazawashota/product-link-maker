{"version":3,"file":"rakuten/index.js","mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAqC;AACqE;AACoG;;AAE9M;AACuB;AAEuD;AAClC;;AAE5C;AACA;AACA;AAFA;AAGA,MAAM8B,oBAAoB,GAAG,SAAS;AACtC,MAAMC,cAAc,GAAG,IAAI;;AAE3B;AACA;AACA;AACA,MAAMC,aAAa,GAAG;EACrBC,UAAU,EAAE;IACXC,KAAK,EAAE,MAAM;IACbC,YAAY,EAAE,KAAK;IACnBC,OAAO,EAAE,UAAU;IACnBC,OAAO,EAAE,cAAc;IACvBC,cAAc,EAAE;EACjB,CAAC;EACDC,SAAS,EAAE;IACVH,OAAO,EAAE,MAAM;IACfI,SAAS,EAAE,QAAQ;IACnBL,YAAY,EAAE;EACf;AACD,CAAC;;AAED;AACA;AACA;AACA,SAASM,kBAAkBA,CAAC;EAAEC,OAAO;EAAEC,QAAQ;EAAEC;AAAM,CAAC,EAAE;EACzD,oBACCjB,uDAAA,CAAAE,uDAAA;IAAAgB,QAAA,gBACCpB,sDAAA;MAAGqB,KAAK,EAAE;QAAEC,QAAQ,EAAE,MAAM;QAAEb,KAAK,EAAE,SAAS;QAAEc,SAAS,EAAE;MAAE,CAAE;MAAAH,QAAA,EAC7DD;IAAK,CACJ,CAAC,EACHF,OAAO,CAACO,GAAG,CAAC,CAACC,GAAG,EAAEC,KAAK,kBACvBxB,uDAAA,CAACZ,uDAAI;MAAa+B,KAAK,EAAE;QAAEM,YAAY,EAAE,MAAM;QAAEC,MAAM,EAAE;MAAiB,CAAE;MAAAR,QAAA,gBAC3EpB,sDAAA,CAACT,6DAAU;QAAA6B,QAAA,eACVlB,uDAAA,CAAChB,uDAAI;UAAC2C,OAAO,EAAC,eAAe;UAACC,KAAK,EAAC,QAAQ;UAAAV,QAAA,gBAC3ClB,uDAAA;YAAMmB,KAAK,EAAE;cAAEU,UAAU,EAAE;YAAI,CAAE;YAAAX,QAAA,GAAC,qBAAI,EAACM,KAAK,GAAG,CAAC;UAAA,CAAO,CAAC,eACxD1B,sDAAA,CAACf,yDAAM;YACN+C,aAAa;YACbC,OAAO;YACPC,OAAO,EAAEA,CAAA,KAAM;cACd,MAAMC,UAAU,GAAG,CAAC,GAAGlB,OAAO,CAAC;cAC/BkB,UAAU,CAACC,MAAM,CAACV,KAAK,EAAE,CAAC,CAAC;cAC3BR,QAAQ,CAACiB,UAAU,CAAC;YACrB,CAAE;YACFE,IAAI,EAAC;UAAO,CACZ,CAAC;QAAA,CACG;MAAC,CACI,CAAC,eACbnC,uDAAA,CAACV,2DAAQ;QAAA4B,QAAA,gBACRpB,sDAAA,CAACnB,8DAAW;UACXsC,KAAK,EAAC,4CAAS;UACfmB,KAAK,EAAEb,GAAG,CAACc,IAAI,IAAI,EAAG;UACtBrB,QAAQ,EAAGsB,GAAG,IAAK;YAClB,MAAML,UAAU,GAAG,CAAC,GAAGlB,OAAO,CAAC;YAC/BkB,UAAU,CAACT,KAAK,CAAC,GAAG;cAAE,GAAGS,UAAU,CAACT,KAAK,CAAC;cAAEa,IAAI,EAAEC;YAAI,CAAC;YACvDtB,QAAQ,CAACiB,UAAU,CAAC;UACrB,CAAE;UACFM,WAAW,EAAC;QAAU,CACtB,CAAC,eACFzC,sDAAA,CAACnB,8DAAW;UACXsC,KAAK,EAAC,uBAAQ;UACdmB,KAAK,EAAEb,GAAG,CAACiB,GAAG,IAAI,EAAG;UACrBxB,QAAQ,EAAGsB,GAAG,IAAK;YAClB,MAAML,UAAU,GAAG,CAAC,GAAGlB,OAAO,CAAC;YAC/BkB,UAAU,CAACT,KAAK,CAAC,GAAG;cAAE,GAAGS,UAAU,CAACT,KAAK,CAAC;cAAEgB,GAAG,EAAEF;YAAI,CAAC;YACtDtB,QAAQ,CAACiB,UAAU,CAAC;UACrB,CAAE;UACFM,WAAW,EAAC;QAAqB,CACjC,CAAC,eACFzC,sDAAA,CAAClB,gEAAa;UACbqC,KAAK,EAAC,sCAAQ;UACdwB,OAAO,EAAElB,GAAG,CAACmB,YAAY,KAAK,KAAM;UACpC1B,QAAQ,EAAGsB,GAAG,IAAK;YAClB,MAAML,UAAU,GAAG,CAAC,GAAGlB,OAAO,CAAC;YAC/BkB,UAAU,CAACT,KAAK,CAAC,GAAG;cAAE,GAAGS,UAAU,CAACT,KAAK,CAAC;cAAEkB,YAAY,EAAEJ;YAAI,CAAC;YAC/DtB,QAAQ,CAACiB,UAAU,CAAC;UACrB;QAAE,CACF,CAAC,eACFjC,uDAAA;UAAKmB,KAAK,EAAE;YAAEE,SAAS,EAAE;UAAO,CAAE;UAAAH,QAAA,gBACjClB,uDAAA,CAACjB,yDAAM;YACN4D,OAAO,EAAC,WAAW;YACnBX,OAAO,EAAEA,CAAA,KAAM;cACd,MAAMC,UAAU,GAAG,CAAC,GAAGlB,OAAO,CAAC;cAC/BkB,UAAU,CAACT,KAAK,CAAC,GAAG;gBACnB,GAAGS,UAAU,CAACT,KAAK,CAAC;gBACpBoB,eAAe,EAAE,CAACX,UAAU,CAACT,KAAK,CAAC,CAACoB;cACrC,CAAC;cACD5B,QAAQ,CAACiB,UAAU,CAAC;YACrB,CAAE;YACFd,KAAK,EAAE;cAAE0B,KAAK,EAAE,MAAM;cAAEpB,YAAY,EAAE;YAAM,CAAE;YAAAP,QAAA,GAE7CK,GAAG,CAACqB,eAAe,GAAG,OAAO,GAAG,UAAU,eAC3C9C,sDAAA;cAAMqB,KAAK,EAAE;gBACZ2B,UAAU,EAAE,KAAK;gBACjBD,KAAK,EAAE,MAAM;gBACbE,MAAM,EAAE,MAAM;gBACdC,eAAe,EAAEzB,GAAG,CAAChB,KAAK,IAAIJ,oBAAoB;gBAClDO,OAAO,EAAE,cAAc;gBACvBF,YAAY,EAAE,KAAK;gBACnBkB,MAAM,EAAE,gBAAgB;gBACxBuB,aAAa,EAAE;cAChB;YAAE,CAAE,CAAC;UAAA,CACE,CAAC,EACR1B,GAAG,CAACqB,eAAe,iBACnB9C,sDAAA,CAACX,8DAAW;YACXoB,KAAK,EAAEgB,GAAG,CAAChB,KAAK,IAAIJ,oBAAqB;YACzCa,QAAQ,EAAGsB,GAAG,IAAK;cAClB,MAAML,UAAU,GAAG,CAAC,GAAGlB,OAAO,CAAC;cAC/BkB,UAAU,CAACT,KAAK,CAAC,GAAG;gBAAE,GAAGS,UAAU,CAACT,KAAK,CAAC;gBAAEjB,KAAK,EAAE+B;cAAI,CAAC;cACxDtB,QAAQ,CAACiB,UAAU,CAAC;YACrB,CAAE;YACFiB,WAAW;YACXC,YAAY,EAAEhD;UAAqB,CACnC,CACD;QAAA,CACG,CAAC;MAAA,CACG,CAAC;IAAA,GApFDqB,KAqFL,CACN,CAAC,eACF1B,sDAAA,CAACf,yDAAM;MACN4D,OAAO,EAAC,WAAW;MACnBX,OAAO,EAAEA,CAAA,KAAM;QACd,MAAMC,UAAU,GAAG,CAAC,GAAGlB,OAAO,EAAE;UAC/BsB,IAAI,EAAE,EAAE;UACRG,GAAG,EAAE,EAAE;UACPE,YAAY,EAAE,IAAI;UAClBnC,KAAK,EAAEJ;QACR,CAAC,CAAC;QACFa,QAAQ,CAACiB,UAAU,CAAC;MACrB,CAAE;MACFE,IAAI,EAAC,MAAM;MACXhB,KAAK,EAAE;QAAE0B,KAAK,EAAE,MAAM;QAAEO,cAAc,EAAE;MAAS,CAAE;MAAAlC,QAAA,EACnD;IAED,CAAQ,CAAC;EAAA,CACR,CAAC;AAEL;;AAEA;AACA;AACA;AACA,MAAMmC,aAAa,GAAG;EACrBC,MAAM,EAAE;IAAEN,eAAe,EAAE,SAAS;IAAEX,IAAI,EAAE;EAAS,CAAC;EACtDkB,OAAO,EAAE;IAAEP,eAAe,EAAE,SAAS;IAAEX,IAAI,EAAE;EAAK,CAAC;EACnDmB,KAAK,EAAE;IAAER,eAAe,EAAE,SAAS;IAAEX,IAAI,EAAE;EAAe,CAAC;EAC3DoB,OAAO,EAAE;IAAET,eAAe,EAAE,SAAS;IAAEX,IAAI,EAAE;EAAO,CAAC;EACrDqB,GAAG,EAAE;IAAEV,eAAe,EAAE,SAAS;IAAEX,IAAI,EAAE;EAAM;AAChD,CAAC;;AAED;AACA;AACA;AACA,SAASsB,kBAAkBA,CAACpC,GAAG,EAAEqC,SAAS,EAAEC,GAAG,EAAE;EAChD,IAAI,CAACtC,GAAG,CAACc,IAAI,IAAI,CAACd,GAAG,CAACiB,GAAG,EAAE,OAAO,IAAI;EAEtC,oBACC1C,sDAAA;IAAKgE,SAAS,EAAC,iBAAiB;IAAA5C,QAAA,eAC/BpB,sDAAA;MACCiE,GAAG,EAAC,mBAAmB;MACvBC,IAAI,EAAEzC,GAAG,CAACiB,GAAI;MACdyB,MAAM,EAAE1C,GAAG,CAACmB,YAAY,KAAK,KAAK,GAAG,QAAQ,GAAG,OAAQ;MACxDvB,KAAK,EAAE;QACN,GAAGd,aAAa,CAACC,UAAU;QAC3B0C,eAAe,EAAEzB,GAAG,CAAChB,KAAK,IAAIJ;MAC/B,CAAE;MAAAe,QAAA,EAEDK,GAAG,CAACc;IAAI,CACP;EAAC,GAXiC,GAAGuB,SAAS,IAAIC,GAAG,EAYpD,CAAC;AAER;;AAEA;AACA;AACA;AACA,SAASK,gBAAgBA,CAACC,OAAO,EAAE3B,GAAG,EAAErB,KAAK,EAAE;EAC9C,oBACCrB,sDAAA;IAAKgE,SAAS,EAAE,YAAYK,OAAO,EAAG;IAAAjD,QAAA,eACrCpB,sDAAA;MACCiE,GAAG,EAAC,mBAAmB;MACvBC,IAAI,EAAExB,GAAI;MACVyB,MAAM,EAAC,QAAQ;MACf9C,KAAK,EAAE;QACN,GAAGd,aAAa,CAACC,UAAU;QAC3B0C,eAAe,EAAE7B,KAAK,CAAC6B;MACxB,CAAE;MAAA9B,QAAA,EAEDC,KAAK,CAACkB;IAAI,CACT;EAAC,GAXuC8B,OAYvC,CAAC;AAER;;AAEA;AACA;AACA;AACA,SAASC,aAAaA,CAAC;EAAEC,IAAI;EAAEC;AAAQ,CAAC,EAAE;EACzC,MAAMC,MAAM,GAAG;IACdC,OAAO,EAAE;MACR,GAAGnE,aAAa,CAACO,SAAS;MAC1BL,KAAK,EAAE,MAAM;MACbyC,eAAe,EAAE,SAAS;MAC1BtB,MAAM,EAAE;IACT,CAAC;IACD+C,KAAK,EAAE;MACN,GAAGpE,aAAa,CAACO,SAAS;MAC1BL,KAAK,EAAE,SAAS;MAChByC,eAAe,EAAE,SAAS;MAC1BtB,MAAM,EAAE;IACT,CAAC;IACDgD,KAAK,EAAE;MACN,GAAGrE,aAAa,CAACO,SAAS;MAC1BL,KAAK,EAAE,MAAM;MACbyC,eAAe,EAAE,SAAS;MAC1BtB,MAAM,EAAE;IACT;EACD,CAAC;EAED,oBAAO5B,sDAAA;IAAKqB,KAAK,EAAEoD,MAAM,CAACF,IAAI,CAAE;IAAAnD,QAAA,EAAEoD;EAAO,CAAM,CAAC;AACjD;;AAEA;AACA;AACA;AACA,SAASK,gBAAgBA,CAACC,UAAU,EAAE;EACrC,MAAMC,OAAO,GAAGD,UAAU,CAACE,EAAE,CAACC,KAAK,CAAC,GAAG,CAAC,CAACzD,GAAG,CAAC0D,CAAC,IAAIA,CAAC,CAACC,IAAI,CAAC,CAAC,CAAC,CAACC,MAAM,CAACC,OAAO,CAAC;EAC3E,MAAMC,QAAQ,GAAGP,OAAO,CAACQ,IAAI,CAAC,GAAG,CAAC;EAClC,MAAMC,QAAQ,GAAGC,MAAM,CAACC,wBAAwB,IAAI,CAAC,CAAC;EACtD,MAAMzE,OAAO,GAAG,EAAE;;EAElB;EACA,CAAC6D,UAAU,CAACa,mBAAmB,IAAI,EAAE,EAAEC,OAAO,CAAC,CAACnE,GAAG,EAAEsC,GAAG,KAAK;IAC5D,MAAM8B,SAAS,GAAGhC,kBAAkB,CAACpC,GAAG,EAAE,eAAe,EAAEsC,GAAG,CAAC;IAC/D,IAAI8B,SAAS,EAAE5E,OAAO,CAAC6E,IAAI,CAACD,SAAS,CAAC;EACvC,CAAC,CAAC;;EAEF;EACA,IAAIL,QAAQ,CAAChC,MAAM,IAAIsB,UAAU,CAACiB,UAAU,KAAK,KAAK,EAAE;IACvD9E,OAAO,CAAC6E,IAAI,CAAC1B,gBAAgB,CAAC,QAAQ,EAAE,+CAA+C4B,kBAAkB,CAACV,QAAQ,CAAC,EAAE,EAAE/B,aAAa,CAACC,MAAM,CAAC,CAAC;EAC9I;EACA,IAAIgC,QAAQ,CAAC/B,OAAO,IAAIqB,UAAU,CAACmB,WAAW,KAAK,KAAK,EAAE;IACzDhF,OAAO,CAAC6E,IAAI,CAAC1B,gBAAgB,CAAC,SAAS,EAAE,4CAA4C4B,kBAAkB,CAACV,QAAQ,CAAC,GAAG,EAAE/B,aAAa,CAACE,OAAO,CAAC,CAAC;EAC9I;EACA,IAAI+B,QAAQ,CAAC9B,KAAK,IAAIoB,UAAU,CAACoB,SAAS,KAAK,KAAK,EAAE;IACrDjF,OAAO,CAAC6E,IAAI,CAAC1B,gBAAgB,CAAC,OAAO,EAAE,gDAAgD4B,kBAAkB,CAACV,QAAQ,CAAC,EAAE,EAAE/B,aAAa,CAACG,KAAK,CAAC,CAAC;EAC7I;EACA,IAAI8B,QAAQ,CAAC7B,OAAO,IAAImB,UAAU,CAACqB,WAAW,KAAK,KAAK,EAAE;IACzDlF,OAAO,CAAC6E,IAAI,CAAC1B,gBAAgB,CAAC,SAAS,EAAE,yCAAyC4B,kBAAkB,CAACV,QAAQ,CAAC,EAAE,EAAE/B,aAAa,CAACI,OAAO,CAAC,CAAC;EAC1I;EACA,IAAI6B,QAAQ,CAAC5B,GAAG,IAAIkB,UAAU,CAACsB,OAAO,KAAK,KAAK,EAAE;IACjD;IACA,MAAMC,YAAY,GAAGtB,OAAO,CAACvD,GAAG,CAACwD,EAAE,IAAIgB,kBAAkB,CAAChB,EAAE,CAAC,CAAC,CAACO,IAAI,CAAC,GAAG,CAAC;IACxE,MAAMe,MAAM,GAAG,0CAA0CD,YAAY,+JAA+J;IACpOpF,OAAO,CAAC6E,IAAI,CAAC1B,gBAAgB,CAAC,KAAK,EAAEkC,MAAM,EAAE/C,aAAa,CAACK,GAAG,CAAC,CAAC;EACjE;;EAEA;EACA,CAACkB,UAAU,CAACyB,kBAAkB,IAAI,EAAE,EAAEX,OAAO,CAAC,CAACnE,GAAG,EAAEsC,GAAG,KAAK;IAC3D,MAAM8B,SAAS,GAAGhC,kBAAkB,CAACpC,GAAG,EAAE,cAAc,EAAEsC,GAAG,CAAC;IAC9D,IAAI8B,SAAS,EAAE5E,OAAO,CAAC6E,IAAI,CAACD,SAAS,CAAC;EACvC,CAAC,CAAC;EAEF,OAAO5E,OAAO;AACf;;AAEA;AACA;AACA;AACA,SAASuF,cAAcA,CAAC;EAAE1B,UAAU;EAAE2B,IAAI;EAAEC,QAAQ;EAAEC,QAAQ;EAAEC,SAAS;EAAEC,QAAQ;EAAEC;AAAiB,CAAC,EAAE;EACxG,oBACC5G,uDAAA;IAAK8D,SAAS,EAAC,iBAAiB;IAAA5C,QAAA,gBAC/BpB,sDAAA;MAAQgE,SAAS,EAAC,mBAAmB;MAAA5C,QAAA,eACpCpB,sDAAA;QAAGiE,GAAG,EAAC,mBAAmB;QACzBC,IAAI,EAAE2C,QAAS;QACf7C,SAAS,EAAC,wBAAwB;QAClCG,MAAM,EAAC,QAAQ;QACf4C,KAAK,EAAEH,SAAU;QAAAxF,QAAA,EAEhBsF,QAAQ,iBACR1G,sDAAA;UAECgH,QAAQ,EAAC,OAAO;UAChBC,GAAG,EAAEP,QAAS;UACdQ,GAAG,EAAEN,SAAS,IAAI,MAAO;UACzB7D,KAAK,EAAC,KAAK;UACXE,MAAM,EAAC,KAAK;UACZe,SAAS,EAAC;QAAyB,GAN9B2C,QAOL;MACD,CACC;IAAC,CACG,CAAC,eACTzG,uDAAA;MAAK8D,SAAS,EAAC,qBAAqB;MAAA5C,QAAA,gBACnCpB,sDAAA;QAAKgE,SAAS,EAAC,mBAAmB;QAAA5C,QAAA,eACjCpB,sDAAA;UAAGiE,GAAG,EAAC,mBAAmB;UACzBC,IAAI,EAAE2C,QAAS;UACf7C,SAAS,EAAC,wBAAwB;UAClCG,MAAM,EAAC,QAAQ;UACf4C,KAAK,EAAEH,SAAU;UAAAxF,QAAA,EAEhBwF,SAAS,GAAGA,SAAS,GAAG;QAAE,CACzB;MAAC,CACA,CAAC,eACN1G,uDAAA;QAAK8D,SAAS,EAAC,qBAAqB;QAAA5C,QAAA,GAClC0D,UAAU,CAACqC,QAAQ,KAAK,KAAK,KAAKV,IAAI,EAAEW,QAAQ,IAAItC,UAAU,CAACuC,IAAI,CAAC,iBACpErH,sDAAA;UAAKgE,SAAS,EAAC,mBAAmB;UAAA5C,QAAA,EAChCqF,IAAI,EAAEW,QAAQ,IAAItC,UAAU,CAACuC;QAAI,CAC9B,CACL,EACAvC,UAAU,CAACwC,KAAK,iBAChBpH,uDAAA;UAAK8D,SAAS,EAAC,mBAAmB;UAAA5C,QAAA,gBACjCpB,sDAAA;YAAMgE,SAAS,EAAC,iBAAiB;YAAA5C,QAAA,EAC/BqF,IAAI,EAAEc,SAAS,GAAG,KAAKd,IAAI,CAACc,SAAS,EAAE,GAAG;UAAQ,CAC9C,CAAC,eACPvH,sDAAA;YAAMgE,SAAS,EAAC,eAAe;YAAA5C,QAAA,EAC7BqF,IAAI,EAAEc,SAAS,GAAG,IAAI,IAAIC,IAAI,CAAC,CAAC,CAACC,kBAAkB,CAAC,CAAC,MAAM,GAAG;UAAE,CAC5D,CAAC;QAAA,CACH,CACL,EACA3C,UAAU,CAAC4C,IAAI,iBACf1H,sDAAA;UAAKgE,SAAS,EAAC,yBAAyB;UAAA5C,QAAA,EAAE0D,UAAU,CAAC4C;QAAI,CAAM,CAC/D;MAAA,CACG,CAAC,eACN1H,sDAAA;QAAKgE,SAAS,EAAC,qBAAqB;QAAA5C,QAAA,EAClC0D,UAAU,CAACE,EAAE,IAAIF,UAAU,CAACE,EAAE,CAACC,KAAK,CAAC,GAAG,CAAC,CAACG,MAAM,CAACC,OAAO,CAAC,CAACsC,MAAM,GAAG,CAAC,IAAI9C,gBAAgB,CAACC,UAAU;MAAC,CACjG,CAAC,eACN5E,uDAAA;QAAK8D,SAAS,EAAC,oBAAoB;QAAA5C,QAAA,gBAClCpB,sDAAA,CAACf,yDAAM;UACN4D,OAAO,EAAC,MAAM;UACdX,OAAO,EAAE4E,gBAAiB;UAC1BzF,KAAK,EAAE;YAAEZ,KAAK,EAAE,SAAS;YAAEI,cAAc,EAAE,WAAW;YAAE+G,MAAM,EAAE,SAAS;YAAEjH,OAAO,EAAE,CAAC;YAAEkH,WAAW,EAAE;UAAO,CAAE;UAAAzG,QAAA,EAC7G;QAED,CAAQ,CAAC,eACTlB,uDAAA;UAAM8D,SAAS,EAAC,wBAAwB;UAAA5C,QAAA,GAAC,oBAAG,EAACqF,IAAI,EAAEqB,aAAa,GAAG,GAAGrB,IAAI,CAACqB,aAAa,GAAG,GAAG,EAAE;QAAA,CAAO,CAAC;MAAA,CACpG,CAAC;IAAA,CACF,CAAC;EAAA,CACF,CAAC;AAER;AAEe,SAASC,IAAIA,CAAC;EAAEjD,UAAU;EAAEkD;AAAc,CAAC,EAAE;EAC3D,MAAM,CAACvB,IAAI,EAAEwB,OAAO,CAAC,GAAGtI,4DAAQ,CAAC,IAAI,CAAC;EACtC,MAAM,CAACuI,SAAS,EAAEC,YAAY,CAAC,GAAGxI,4DAAQ,CAAC,KAAK,CAAC;EACjD,MAAM,CAACgF,KAAK,EAAEyD,QAAQ,CAAC,GAAGzI,4DAAQ,CAAC,IAAI,CAAC;EACxC,MAAM0I,eAAe,GAAGzI,0DAAM,CAAC,IAAI,CAAC;EAEpC,MAAM0I,SAAS,GAAGzI,+DAAW,CAAC,YAAY;IACzC,IAAI,CAACiF,UAAU,CAACyD,EAAE,IAAI,CAACzD,UAAU,CAAC0D,EAAE,IAAI,CAAC1D,UAAU,CAACE,EAAE,EAAE;MACvDiD,OAAO,CAAC,IAAI,CAAC;MACbD,aAAa,CAACS,IAAI,KAAK;QAAE,GAAGA,IAAI;QAAE/B,QAAQ,EAAE;MAAG,CAAC,CAAC,CAAC;MAClD;IACD;IACAyB,YAAY,CAAC,IAAI,CAAC;IAClBC,QAAQ,CAAC,IAAI,CAAC;IACd,IAAI;MACH;MACA,MAAMM,IAAI,GAAG,MAAM5I,2DAAQ,CAAC;QAC3B6I,IAAI,EAAE,sCAAsC3C,kBAAkB,CAAClB,UAAU,CAACyD,EAAE,IAAI,EAAE,CAAC,OAAOvC,kBAAkB,CAAClB,UAAU,CAACE,EAAE,IAAI,EAAE,CAAC,OAAOgB,kBAAkB,CAAClB,UAAU,CAAC0D,EAAE,IAAI,EAAE,CAAC;MAChL,CAAC,CAAC;MACF,IAAIE,IAAI,EAAEE,KAAK,GAAG,CAAC,CAAC,EAAEC,IAAI,EAAE;QAC3B,MAAMC,OAAO,GAAGJ,IAAI,CAACE,KAAK,CAAC,CAAC,CAAC,CAACC,IAAI;QAClCZ,OAAO,CAACa,OAAO,CAAC;QAChB,MAAMC,QAAQ,GAAGD,OAAO,CAACE,eAAe,GAAG,CAAC,CAAC,EAAEtC,QAAQ,IAAI,EAAE;QAC7DsB,aAAa,CAACS,IAAI,KAAK;UAAE,GAAGA,IAAI;UAAE/B,QAAQ,EAAEqC;QAAS,CAAC,CAAC,CAAC;QACxDX,QAAQ,CAAC,IAAI,CAAC;MACf,CAAC,MAAM,IAAIM,IAAI,EAAE/D,KAAK,EAAE;QACvBsD,OAAO,CAAC,IAAI,CAAC;QACbD,aAAa,CAACS,IAAI,KAAK;UAAE,GAAGA,IAAI;UAAE/B,QAAQ,EAAE;QAAG,CAAC,CAAC,CAAC;QAClD0B,QAAQ,CAAC,UAAU,IAAIM,IAAI,CAACO,iBAAiB,IAAI,mCAAmC,CAAC,CAAC;MACvF,CAAC,MAAM;QACNhB,OAAO,CAAC,IAAI,CAAC;QACbD,aAAa,CAACS,IAAI,KAAK;UAAE,GAAGA,IAAI;UAAE/B,QAAQ,EAAE;QAAG,CAAC,CAAC,CAAC;QAClD0B,QAAQ,CAAC,gBAAgB,CAAC;MAC3B;IACD,CAAC,CAAC,OAAOzD,KAAK,EAAE;MACfuE,OAAO,CAACvE,KAAK,CAAC,0BAA0B,EAAEA,KAAK,CAAC;MAChDsD,OAAO,CAAC,IAAI,CAAC;MACbD,aAAa,CAACS,IAAI,KAAK;QAAE,GAAGA,IAAI;QAAE/B,QAAQ,EAAE;MAAG,CAAC,CAAC,CAAC;MAClD0B,QAAQ,CAAC,mCAAmC,CAAC;IAC9C,CAAC,SAAS;MACTD,YAAY,CAAC,KAAK,CAAC;IACpB;EACD,CAAC,EAAE,CAACrD,UAAU,CAACyD,EAAE,EAAEzD,UAAU,CAAC0D,EAAE,EAAE1D,UAAU,CAACE,EAAE,EAAEgD,aAAa,CAAC,CAAC;;EAEhE;EACA,MAAMlB,gBAAgB,GAAGjH,+DAAW,CAAC,YAAY;IAChD,IAAI,CAAC4F,MAAM,CAAC0D,OAAO,CAAC,sBAAsB,CAAC,EAAE;MAC5C;IACD;IACA,IAAI;MACH,MAAMrJ,2DAAQ,CAAC;QACd6I,IAAI,EAAE,uCAAuC;QAC7CS,MAAM,EAAE,MAAM;QACdV,IAAI,EAAE;UACLH,EAAE,EAAEzD,UAAU,CAACyD,EAAE;UACjBvD,EAAE,EAAEF,UAAU,CAACE,EAAE;UACjBwD,EAAE,EAAE1D,UAAU,CAAC0D;QAChB;MACD,CAAC,CAAC;MACF;MACAF,SAAS,CAAC,CAAC;IACZ,CAAC,CAAC,OAAO3D,KAAK,EAAE;MACfuE,OAAO,CAACvE,KAAK,CAAC,oBAAoB,EAAEA,KAAK,CAAC;IAC3C;EACD,CAAC,EAAE,CAACG,UAAU,CAACyD,EAAE,EAAEzD,UAAU,CAACE,EAAE,EAAEF,UAAU,CAAC0D,EAAE,EAAEF,SAAS,CAAC,CAAC;;EAE5D;EACA5I,6DAAS,CAAC,MAAM;IACf;IACA,IAAI2I,eAAe,CAACgB,OAAO,EAAE;MAC5BC,YAAY,CAACjB,eAAe,CAACgB,OAAO,CAAC;IACtC;IAEA,IAAIvE,UAAU,CAACyD,EAAE,IAAIzD,UAAU,CAAC0D,EAAE,IAAI1D,UAAU,CAACE,EAAE,EAAE;MACpD;MACAqD,eAAe,CAACgB,OAAO,GAAGE,UAAU,CAAC,MAAM;QAC1CjB,SAAS,CAAC,CAAC;MACZ,CAAC,EAAEhI,cAAc,CAAC;IACnB,CAAC,MAAM;MACN2H,OAAO,CAAC,IAAI,CAAC;IACd;;IAEA;IACA,OAAO,MAAM;MACZ,IAAII,eAAe,CAACgB,OAAO,EAAE;QAC5BC,YAAY,CAACjB,eAAe,CAACgB,OAAO,CAAC;MACtC;IACD,CAAC;IACD;EACD,CAAC,EAAE,CAACvE,UAAU,CAACyD,EAAE,EAAEzD,UAAU,CAAC0D,EAAE,EAAE1D,UAAU,CAACE,EAAE,CAAC,CAAC;;EAEjD;EACA,MAAM,CAAC2B,QAAQ,EAAE6C,WAAW,CAAC,GAAG7J,4DAAQ,CAAC,CAAC,CAAC;EAC3C,MAAM+G,QAAQ,GAAG5B,UAAU,CAAC4B,QAAQ,KAAKD,IAAI,IAAIA,IAAI,CAACuC,eAAe,IAAIvC,IAAI,CAACuC,eAAe,CAAC,CAAC,CAAC,GAAGvC,IAAI,CAACuC,eAAe,CAAC,CAAC,CAAC,CAACtC,QAAQ,GAAG,EAAE,CAAC;EACzIhH,6DAAS,CAAC,MAAM;IACf8J,WAAW,CAACC,CAAC,IAAIA,CAAC,GAAG,CAAC,CAAC;EACxB,CAAC,EAAE,CAAC/C,QAAQ,CAAC,CAAC;EACd,MAAME,SAAS,GAAG9B,UAAU,CAACiC,KAAK,KAAKN,IAAI,GAAGA,IAAI,CAACiD,QAAQ,GAAG,EAAE,CAAC;EACjE,MAAM7C,QAAQ,GAAGJ,IAAI,GAAIA,IAAI,CAACkD,YAAY,IAAIlD,IAAI,CAACmD,OAAO,IAAI,GAAG,GAAI,GAAG;EAExE,oBACC1J,uDAAA,CAAAE,uDAAA;IAAAgB,QAAA,gBACClB,uDAAA,CAACxB,sEAAiB;MAAA0C,QAAA,gBACjBlB,uDAAA,CAACtB,4DAAS;QAACmI,KAAK,EAAExI,mDAAE,CAAC,QAAQ,EAAE,oBAAoB,CAAE;QAACsL,WAAW,EAAE,IAAK;QAAAzI,QAAA,gBACvEpB,sDAAA,CAACnB,8DAAW;UACXsC,KAAK,EAAE5C,mDAAE,CAAC,aAAa,EAAE,oBAAoB,CAAE;UAC/CuL,IAAI,EAAEhF,UAAU,CAAC0D,EAAE,GAAGjK,mDAAE,CAAC,wBAAwB,EAAE,oBAAoB,CAAC,GAAG,EAAG;UAC9E+D,KAAK,EAAEwC,UAAU,CAACyD,EAAG;UACrBwB,QAAQ,EAAE,CAAC,CAACjF,UAAU,CAAC0D,EAAG;UAC1BtH,QAAQ,EAAGsB,GAAG,IAAK;YAClBwF,aAAa,CAAC;cAAEO,EAAE,EAAE/F,GAAG;cAAEgG,EAAE,EAAE;YAAG,CAAC,CAAC,CAAC,CAAC;UACrC,CAAE;UACF/F,WAAW,EAAC,eAAe;UAC3BpB,KAAK,EAAEyD,UAAU,CAAC0D,EAAE,GAAG;YAAEtF,eAAe,EAAE,SAAS;YAAEzC,KAAK,EAAE;UAAO,CAAC,GAAG,CAAC;QAAE,CAC1E,CAAC,eACFT,sDAAA,CAACnB,8DAAW;UACXsC,KAAK,EAAE5C,mDAAE,CAAC,MAAM,EAAE,oBAAoB,CAAE;UACxCuL,IAAI,EAAEhF,UAAU,CAACyD,EAAE,GAAGhK,mDAAE,CAAC,+BAA+B,EAAE,oBAAoB,CAAC,GAAG,EAAG;UACrF+D,KAAK,EAAEwC,UAAU,CAAC0D,EAAG;UACrBuB,QAAQ,EAAE,CAAC,CAACjF,UAAU,CAACyD,EAAG;UAC1BrH,QAAQ,EAAGsB,GAAG,IAAK;YAClBwF,aAAa,CAAC;cAAEQ,EAAE,EAAEhG,GAAG;cAAE+F,EAAE,EAAE;YAAG,CAAC,CAAC,CAAC,CAAC;UACrC,CAAE;UACF9F,WAAW,EAAC,eAAe;UAC3BpB,KAAK,EAAEyD,UAAU,CAACyD,EAAE,GAAG;YAAErF,eAAe,EAAE,SAAS;YAAEzC,KAAK,EAAE;UAAO,CAAC,GAAG,CAAC;QAAE,CAC1E,CAAC,eACFT,sDAAA,CAAChB,iEAAc;UACdmC,KAAK,EAAE5C,mDAAE,CAAC,SAAS,EAAE,oBAAoB,CAAE;UAC3C+D,KAAK,EAAEwC,UAAU,CAACE,EAAE,GAAGF,UAAU,CAACE,EAAE,CAACC,KAAK,CAAC,GAAG,CAAC,CAACG,MAAM,CAACC,OAAO,CAAC,GAAG,EAAG;UACrEnE,QAAQ,EAAG8I,MAAM,IAAKhC,aAAa,CAAC;YAAEhD,EAAE,EAAEgF,MAAM,CAACzE,IAAI,CAAC,GAAG;UAAE,CAAC,CAAE;UAC9D9C,WAAW,EAAElE,mDAAE,CAAC,iBAAiB,EAAE,oBAAoB;QAAE,CACzD,CAAC,eACFyB,sDAAA,CAACnB,8DAAW;UACXsC,KAAK,EAAE5C,mDAAE,CAAC,SAAS,EAAE,oBAAoB,CAAE;UAC3C+D,KAAK,EAAEwC,UAAU,CAACuC,IAAK;UACvBnG,QAAQ,EAAGsB,GAAG,IAAKwF,aAAa,CAAC;YAAEX,IAAI,EAAE7E;UAAI,CAAC;QAAE,CAChD,CAAC,eACFxC,sDAAA,CAAChB,iEAAc;UACdmC,KAAK,EAAE5C,mDAAE,CAAC,KAAK,EAAE,oBAAoB,CAAE;UACvC+D,KAAK,EAAEwC,UAAU,CAACmF,MAAM,GAAGnF,UAAU,CAACmF,MAAM,CAAChF,KAAK,CAAC,GAAG,CAAC,CAACG,MAAM,CAACC,OAAO,CAAC,GAAG,EAAG;UAC7EnE,QAAQ,EAAG8I,MAAM,IAAKhC,aAAa,CAAC;YAAEiC,MAAM,EAAED,MAAM,CAACzE,IAAI,CAAC,GAAG;UAAE,CAAC,CAAE;UAClE9C,WAAW,EAAElE,mDAAE,CAAC,eAAe,EAAE,oBAAoB;QAAE,CACvD,CAAC,eACFyB,sDAAA,CAACjB,kEAAe;UACfoC,KAAK,EAAE5C,mDAAE,CAAC,MAAM,EAAE,oBAAoB,CAAE;UACxC+D,KAAK,EAAEwC,UAAU,CAACiC,KAAM;UACxB7F,QAAQ,EAAGsB,GAAG,IAAKwF,aAAa,CAAC;YAAEjB,KAAK,EAAEvE;UAAI,CAAC;QAAE,CACjD,CAAC,eACFxC,sDAAA,CAAClB,gEAAa;UACbqC,KAAK,EAAE5C,mDAAE,CAAC,MAAM,EAAE,oBAAoB,CAAE;UACxCoE,OAAO,EAAEmC,UAAU,CAACqC,QAAQ,KAAK,KAAM;UACvCjG,QAAQ,EAAGsB,GAAG,IAAKwF,aAAa,CAAC;YAAEb,QAAQ,EAAE3E;UAAI,CAAC;QAAE,CACpD,CAAC,eACFxC,sDAAA,CAAClB,gEAAa;UACbqC,KAAK,EAAE5C,mDAAE,CAAC,MAAM,EAAE,oBAAoB,CAAE;UACxCoE,OAAO,EAAEmC,UAAU,CAACwC,KAAM;UAC1BpG,QAAQ,EAAGsB,GAAG,IAAKwF,aAAa,CAAC;YAAEV,KAAK,EAAE9E;UAAI,CAAC;QAAE,CACjD,CAAC,eACFxC,sDAAA,CAACjB,kEAAe;UACfoC,KAAK,EAAE5C,mDAAE,CAAC,KAAK,EAAE,oBAAoB,CAAE;UACvC+D,KAAK,EAAEwC,UAAU,CAAC4C,IAAK;UACvBxG,QAAQ,EAAGsB,GAAG,IAAKwF,aAAa,CAAC;YAAEN,IAAI,EAAElF;UAAI,CAAC;QAAE,CAChD,CAAC,eACFxC,sDAAA,CAACZ,wEAAO;UAAAgC,QAAA,EAAC;QAAQ,CAAS,CAAC,eAC3BpB,sDAAA,CAACrB,qEAAgB;UAAAyC,QAAA,eAChBlB,uDAAA;YAAKmB,KAAK,EAAE;cAAEM,YAAY,EAAE;YAAI,CAAE;YAAAP,QAAA,GAChC,CAAC0D,UAAU,CAAC4B,QAAQ,KAAK,EAAE,GAAG5B,UAAU,CAAC4B,QAAQ,GAAGD,IAAI,EAAEuC,eAAe,GAAG,CAAC,CAAC,EAAEtC,QAAQ,kBACxF1G,sDAAA;cAAKqB,KAAK,EAAE;gBAAEM,YAAY,EAAE,MAAM;gBAAEf,OAAO,EAAE,MAAM;gBAAE0C,cAAc,EAAE,QAAQ;gBAAEJ,eAAe,EAAE;cAAO,CAAE;cAAA9B,QAAA,eACxGpB,sDAAA;gBACCiH,GAAG,EAAEnC,UAAU,CAAC4B,QAAQ,KAAK,EAAE,GAAG5B,UAAU,CAAC4B,QAAQ,GAAGD,IAAI,EAAEuC,eAAe,GAAG,CAAC,CAAC,EAAEtC,QAAS;gBAC7FQ,GAAG,EAAC,EAAE;gBACN7F,KAAK,EAAE;kBAAET,OAAO,EAAE;gBAAQ;cAAE,CAC5B;YAAC,CACE,CACL,eACDZ,sDAAA,CAACvB,gEAAW;cACXyL,QAAQ,EAAGC,KAAK,IAAKnC,aAAa,CAAC;gBAAEtB,QAAQ,EAAEyD,KAAK,CAACzH,GAAG,IAAI;cAAG,CAAC,CAAE;cAClE0H,YAAY,EAAE,CAAC,OAAO,CAAE;cACxBC,MAAM,EAAEA,CAAC;gBAAEC;cAAK,CAAC,kBAChBpK,uDAAA,CAAChB,uDAAI;gBAAAkC,QAAA,gBACJpB,sDAAA,CAACf,yDAAM;kBAACiD,OAAO,EAAEoI,IAAK;kBAACzH,OAAO,EAAC,WAAW;kBAAAzB,QAAA,EAAC;gBAE3C,CAAQ,CAAC,EACR0D,UAAU,CAAC4B,QAAQ,iBACnB1G,sDAAA,CAACf,yDAAM;kBACNoC,KAAK,EAAE;oBAAEE,SAAS,EAAE;kBAAE,CAAE;kBACxBW,OAAO,EAAEA,CAAA,KAAM8F,aAAa,CAAC;oBAAEtB,QAAQ,EAAE;kBAAG,CAAC,CAAE;kBAC/C1E,aAAa;kBAAAZ,QAAA,EAEZ7C,mDAAE,CAAC,SAAS,EAAE,oBAAoB;gBAAC,CAC7B,CACR;cAAA,CACI;YACL,CACF,CAAC;UAAA,CACE;QAAC,CACW,CAAC,eAEnByB,sDAAA;UAAKqB,KAAK,EAAE;YAAEkJ,MAAM,EAAE;UAAa;QAAE,CAAE,CAAC,eACxCvK,sDAAA,CAACZ,wEAAO;UAAAgC,QAAA,EAAC;QAAO,CAAS,CAAC,eAC1BpB,sDAAA,CAAClB,gEAAa;UACbqC,KAAK,EAAE5C,mDAAE,CAAC,cAAc,EAAE,oBAAoB,CAAE;UAChDoE,OAAO,EAAEmC,UAAU,CAACiB,UAAU,KAAK,KAAM;UACzC7E,QAAQ,EAAEsB,GAAG,IAAIwF,aAAa,CAAC;YAAEjC,UAAU,EAAEvD;UAAI,CAAC;QAAE,CACpD,CAAC,eACFxC,sDAAA,CAAClB,gEAAa;UACbqC,KAAK,EAAE5C,mDAAE,CAAC,UAAU,EAAE,oBAAoB,CAAE;UAC5CoE,OAAO,EAAEmC,UAAU,CAACmB,WAAW,KAAK,KAAM;UAC1C/E,QAAQ,EAAEsB,GAAG,IAAIwF,aAAa,CAAC;YAAE/B,WAAW,EAAEzD;UAAI,CAAC;QAAE,CACrD,CAAC,eACFxC,sDAAA,CAAClB,gEAAa;UACbqC,KAAK,EAAE5C,mDAAE,CAAC,cAAc,EAAE,oBAAoB,CAAE;UAChDoE,OAAO,EAAEmC,UAAU,CAACoB,SAAS,KAAK,KAAM;UACxChF,QAAQ,EAAEsB,GAAG,IAAIwF,aAAa,CAAC;YAAE9B,SAAS,EAAE1D;UAAI,CAAC;QAAE,CACnD,CAAC,eACFxC,sDAAA,CAAClB,gEAAa;UACbqC,KAAK,EAAE5C,mDAAE,CAAC,YAAY,EAAE,oBAAoB,CAAE;UAC9CoE,OAAO,EAAEmC,UAAU,CAACqB,WAAW,KAAK,KAAM;UAC1CjF,QAAQ,EAAEsB,GAAG,IAAIwF,aAAa,CAAC;YAAE7B,WAAW,EAAE3D;UAAI,CAAC;QAAE,CACrD,CAAC,eACFxC,sDAAA,CAAClB,gEAAa;UACbqC,KAAK,EAAE5C,mDAAE,CAAC,WAAW,EAAE,oBAAoB,CAAE;UAC7CoE,OAAO,EAAEmC,UAAU,CAACsB,OAAO,KAAK,KAAM;UACtClF,QAAQ,EAAEsB,GAAG,IAAIwF,aAAa,CAAC;YAAE5B,OAAO,EAAE5D;UAAI,CAAC;QAAE,CACjD,CAAC;MAAA,CAEQ,CAAC,eACZxC,sDAAA,CAACpB,4DAAS;QAACmI,KAAK,EAAExI,mDAAE,CAAC,YAAY,EAAE,oBAAoB,CAAE;QAACsL,WAAW,EAAE,IAAK;QAAAzI,QAAA,eAC3EpB,sDAAA,CAACgB,kBAAkB;UAClBC,OAAO,EAAE6D,UAAU,CAACa,mBAAmB,IAAI,EAAG;UAC9CzE,QAAQ,EAAGiB,UAAU,IAAK6F,aAAa,CAAC;YAAErC,mBAAmB,EAAExD;UAAW,CAAC,CAAE;UAC7EhB,KAAK,EAAC;QAA8B,CACpC;MAAC,CACQ,CAAC,eACZnB,sDAAA,CAACpB,4DAAS;QAACmI,KAAK,EAAExI,mDAAE,CAAC,YAAY,EAAE,oBAAoB,CAAE;QAACsL,WAAW,EAAE,IAAK;QAAAzI,QAAA,eAC3EpB,sDAAA,CAACgB,kBAAkB;UAClBC,OAAO,EAAE6D,UAAU,CAACyB,kBAAkB,IAAI,EAAG;UAC7CrF,QAAQ,EAAGiB,UAAU,IAAK6F,aAAa,CAAC;YAAEzB,kBAAkB,EAAEpE;UAAW,CAAC,CAAE;UAC5EhB,KAAK,EAAC;QAA8B,CACpC;MAAC,CACQ,CAAC,eACZnB,sDAAA,CAACpB,4DAAS;QAACmI,KAAK,EAAExI,mDAAE,CAAC,WAAW,EAAE,oBAAoB,CAAE;QAACsL,WAAW,EAAE,KAAM;QAAAzI,QAAA,eAC3EpB,sDAAA,CAACf,yDAAM;UACNiF,IAAI,EAAE,GAAGuB,MAAM,CAAC+E,QAAQ,CAACC,MAAM,uDAAwD;UACvFtG,MAAM,EAAC,QAAQ;UACfH,SAAS,EAAC,EAAE;UACZnB,OAAO,EAAC,SAAS;UACjBR,IAAI,EAAC,eAAe;UACpBhB,KAAK,EAAE;YAAEE,SAAS,EAAE,KAAK;YAAEwB,KAAK,EAAE,MAAM;YAAEhC,SAAS,EAAE;UAAS,CAAE;UAAAK,QAAA,EAE/D7C,mDAAE,CAAC,WAAW,EAAE,oBAAoB;QAAC,CAC/B;MAAC,CACC,CAAC;IAAA,CACM,CAAC,eACpByB,sDAAA;MAAA,GAASxB,sEAAa,CAAC,CAAC;MAAA4C,QAAA,EACtB8G,SAAS,gBACTlI,sDAAA,CAACsE,aAAa;QAACC,IAAI,EAAC,SAAS;QAACC,OAAO,EAAC;MAAY,CAAE,CAAC,GAClDG,KAAK,gBACR3E,sDAAA,CAACsE,aAAa;QAACC,IAAI,EAAC,OAAO;QAACC,OAAO,EAAEG;MAAM,CAAE,CAAC,GAC3C,CAACG,UAAU,CAACyD,EAAE,IAAI,CAACzD,UAAU,CAAC0D,EAAE,IAAI,CAAC1D,UAAU,CAACE,EAAE,gBACrDhF,sDAAA,CAACsE,aAAa;QAACC,IAAI,EAAC,OAAO;QAACC,OAAO,EAAC;MAAe,CAAE,CAAC,gBAEtDxE,sDAAA,CAACwG,cAAc;QACd1B,UAAU,EAAEA,UAAW;QACvB2B,IAAI,EAAEA,IAAK;QACXC,QAAQ,EAAEA,QAAS;QACnBC,QAAQ,EAAEA,QAAS;QACnBC,SAAS,EAAEA,SAAU;QACrBC,QAAQ,EAAEA,QAAS;QACnBC,gBAAgB,EAAEA;MAAiB,CACnC;IACD,CACG,CAAC;EAAA,CACL,CAAC;AAEL;;;;;;;;;;;ACpnBA;;;;;;;;;;;;;;;;;ACAA;AACA;AACA;AACA;AACA;AACsD;;AAEtD;AACA;AACA;AACA;AACA;AACA;AACA;AACsB;;AAEtB;AACA;AACA;AAC0B;AACU;;AAEpC;AACA;AACA;AACA;AACA;AACA4D,oEAAiB,CAACC,6CAAa,EAAE;EAChC;AACD;AACA;EACCE,IAAI,EAAE9C,6CAAIA;AACX,CAAC,CAAC;;;;;;;;;;;AChCF;;;;;;;;;;;ACAA;;;;;;;;;;ACAA;;;;;;;;;;ACAA;;;;;;;;;;ACAA;;;;;;;;;;ACAA;;;;;;;;;;ACAA;;;;;;;;;;ACAA;;;;;;UCAA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;UAEA;UACA;;;;;WCzBA;WACA;WACA;WACA;WACA,+BAA+B,wCAAwC;WACvE;WACA;WACA;WACA;WACA,iBAAiB,qBAAqB;WACtC;WACA;WACA,kBAAkB,qBAAqB;WACvC;WACA;WACA,KAAK;WACL;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;;;;;WC3BA;WACA;WACA;WACA;WACA;WACA,iCAAiC,WAAW;WAC5C;WACA;;;;;WCPA;WACA;WACA;WACA;WACA,yCAAyC,wCAAwC;WACjF;WACA;WACA;;;;;WCPA;;;;;WCAA;WACA;WACA;WACA,uDAAuD,iBAAiB;WACxE;WACA,gDAAgD,aAAa;WAC7D;;;;;WCNA;;WAEA;WACA;WACA;WACA;WACA;WACA;WACA;;WAEA;;WAEA;;WAEA;;WAEA;;WAEA;;WAEA;;WAEA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,MAAM,qBAAqB;WAC3B;WACA;WACA;WACA;WACA;WACA;WACA;WACA;;WAEA;WACA;WACA;;;;;UEjDA;UACA;UACA;UACA;UACA","sources":["webpack://product-link-maker/./src/rakuten/edit.js","webpack://product-link-maker/./src/rakuten/editor.scss","webpack://product-link-maker/./src/rakuten/index.js","webpack://product-link-maker/./src/rakuten/style.scss","webpack://product-link-maker/external window [\"wp\",\"apiFetch\"]","webpack://product-link-maker/external window [\"wp\",\"blockEditor\"]","webpack://product-link-maker/external window [\"wp\",\"blocks\"]","webpack://product-link-maker/external window [\"wp\",\"components\"]","webpack://product-link-maker/external window [\"wp\",\"element\"]","webpack://product-link-maker/external window [\"wp\",\"i18n\"]","webpack://product-link-maker/external window \"ReactJSXRuntime\"","webpack://product-link-maker/webpack/bootstrap","webpack://product-link-maker/webpack/runtime/chunk loaded","webpack://product-link-maker/webpack/runtime/compat get default export","webpack://product-link-maker/webpack/runtime/define property getters","webpack://product-link-maker/webpack/runtime/hasOwnProperty shorthand","webpack://product-link-maker/webpack/runtime/make namespace object","webpack://product-link-maker/webpack/runtime/jsonp chunk loading","webpack://product-link-maker/webpack/before-startup","webpack://product-link-maker/webpack/startup","webpack://product-link-maker/webpack/after-startup"],"sourcesContent":["import { __ } from '@wordpress/i18n';\nimport { useBlockProps, MediaUpload, InspectorControls, MediaUploadCheck } from '@wordpress/block-editor';\nimport { PanelBody, TextControl, ToggleControl, TextareaControl, FormTokenField, Button, Flex, __experimentalHeading as Heading, ColorPicker, Card, CardHeader, CardBody, Icon } from '@wordpress/components';\n\n// import './style.scss';\nimport './editor.scss';\n\nimport { useEffect, useState, useRef, useCallback } from '@wordpress/element';\nimport apiFetch from '@wordpress/api-fetch';\n\n/**\n * 定数定義\n */\nconst DEFAULT_BUTTON_COLOR = '#2196f3';\nconst DEBOUNCE_DELAY = 1000;\n\n/**\n * 共通スタイル定義\n */\nconst COMMON_STYLES = {\n\tbuttonBase: {\n\t\tcolor: '#fff',\n\t\tborderRadius: '4px',\n\t\tpadding: '6px 16px',\n\t\tdisplay: 'inline-block',\n\t\ttextDecoration: 'none'\n\t},\n\tstatusBox: {\n\t\tpadding: '32px',\n\t\ttextAlign: 'center',\n\t\tborderRadius: '4px'\n\t}\n};\n\n/**\n * カスタムボタンコンポーネント（再利用可能）\n */\nfunction CustomButtonEditor({ buttons, onChange, label }) {\n\treturn (\n\t\t<>\n\t\t\t<p style={{ fontSize: '13px', color: '#757575', marginTop: 0 }}>\n\t\t\t\t{label}\n\t\t\t</p>\n\t\t\t{buttons.map((btn, index) => (\n\t\t\t\t<Card key={index} style={{ marginBottom: '16px', border: '1px solid #ddd' }}>\n\t\t\t\t\t<CardHeader>\n\t\t\t\t\t\t<Flex justify=\"space-between\" align=\"center\">\n\t\t\t\t\t\t\t<span style={{ fontWeight: 600 }}>ボタン {index + 1}</span>\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tisDestructive\n\t\t\t\t\t\t\t\tisSmall\n\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\tconst newButtons = [...buttons];\n\t\t\t\t\t\t\t\t\tnewButtons.splice(index, 1);\n\t\t\t\t\t\t\t\t\tonChange(newButtons);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\ticon=\"trash\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Flex>\n\t\t\t\t\t</CardHeader>\n\t\t\t\t\t<CardBody>\n\t\t\t\t\t\t<TextControl\n\t\t\t\t\t\t\tlabel=\"ボタンテキスト\"\n\t\t\t\t\t\t\tvalue={btn.text || ''}\n\t\t\t\t\t\t\tonChange={(val) => {\n\t\t\t\t\t\t\t\tconst newButtons = [...buttons];\n\t\t\t\t\t\t\t\tnewButtons[index] = { ...newButtons[index], text: val };\n\t\t\t\t\t\t\t\tonChange(newButtons);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tplaceholder=\"例: 公式サイト\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<TextControl\n\t\t\t\t\t\t\tlabel=\"リンクURL\"\n\t\t\t\t\t\t\tvalue={btn.url || ''}\n\t\t\t\t\t\t\tonChange={(val) => {\n\t\t\t\t\t\t\t\tconst newButtons = [...buttons];\n\t\t\t\t\t\t\t\tnewButtons[index] = { ...newButtons[index], url: val };\n\t\t\t\t\t\t\t\tonChange(newButtons);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tplaceholder=\"https://example.com\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\t\tlabel=\"別タブで開く\"\n\t\t\t\t\t\t\tchecked={btn.openInNewTab !== false}\n\t\t\t\t\t\t\tonChange={(val) => {\n\t\t\t\t\t\t\t\tconst newButtons = [...buttons];\n\t\t\t\t\t\t\t\tnewButtons[index] = { ...newButtons[index], openInNewTab: val };\n\t\t\t\t\t\t\t\tonChange(newButtons);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<div style={{ marginTop: '12px' }}>\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tvariant=\"secondary\"\n\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\tconst newButtons = [...buttons];\n\t\t\t\t\t\t\t\t\tnewButtons[index] = {\n\t\t\t\t\t\t\t\t\t\t...newButtons[index],\n\t\t\t\t\t\t\t\t\t\tshowColorPicker: !newButtons[index].showColorPicker\n\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\tonChange(newButtons);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tstyle={{ width: '100%', marginBottom: '8px' }}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{btn.showColorPicker ? '色を選択中' : 'ボタンの色を選択'}\n\t\t\t\t\t\t\t\t<span style={{\n\t\t\t\t\t\t\t\t\tmarginLeft: '8px',\n\t\t\t\t\t\t\t\t\twidth: '20px',\n\t\t\t\t\t\t\t\t\theight: '20px',\n\t\t\t\t\t\t\t\t\tbackgroundColor: btn.color || DEFAULT_BUTTON_COLOR,\n\t\t\t\t\t\t\t\t\tdisplay: 'inline-block',\n\t\t\t\t\t\t\t\t\tborderRadius: '3px',\n\t\t\t\t\t\t\t\t\tborder: '1px solid #ddd',\n\t\t\t\t\t\t\t\t\tverticalAlign: 'middle'\n\t\t\t\t\t\t\t\t}} />\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t{btn.showColorPicker && (\n\t\t\t\t\t\t\t\t<ColorPicker\n\t\t\t\t\t\t\t\t\tcolor={btn.color || DEFAULT_BUTTON_COLOR}\n\t\t\t\t\t\t\t\t\tonChange={(val) => {\n\t\t\t\t\t\t\t\t\t\tconst newButtons = [...buttons];\n\t\t\t\t\t\t\t\t\t\tnewButtons[index] = { ...newButtons[index], color: val };\n\t\t\t\t\t\t\t\t\t\tonChange(newButtons);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tenableAlpha\n\t\t\t\t\t\t\t\t\tdefaultValue={DEFAULT_BUTTON_COLOR}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</CardBody>\n\t\t\t\t</Card>\n\t\t\t))}\n\t\t\t<Button\n\t\t\t\tvariant=\"secondary\"\n\t\t\t\tonClick={() => {\n\t\t\t\t\tconst newButtons = [...buttons, {\n\t\t\t\t\t\ttext: '',\n\t\t\t\t\t\turl: '',\n\t\t\t\t\t\topenInNewTab: true,\n\t\t\t\t\t\tcolor: DEFAULT_BUTTON_COLOR\n\t\t\t\t\t}];\n\t\t\t\t\tonChange(newButtons);\n\t\t\t\t}}\n\t\t\t\ticon=\"plus\"\n\t\t\t\tstyle={{ width: '100%', justifyContent: 'center' }}\n\t\t\t>\n\t\t\t\tボタンを追加\n\t\t\t</Button>\n\t\t</>\n\t);\n}\n\n/**\n * ショップボタンのスタイル定義\n */\nconst BUTTON_STYLES = {\n\tamazon: { backgroundColor: '#f79901', text: 'Amazon' },\n\trakuten: { backgroundColor: '#bf0000', text: '楽天' },\n\tyahoo: { backgroundColor: '#e60033', text: 'Yahoo!ショッピング' },\n\tmercari: { backgroundColor: '#4dc9ff', text: 'メルカリ' },\n\tdmm: { backgroundColor: '#00bcd4', text: 'DMM' }\n};\n\n/**\n * カスタムボタンレンダリング\n */\nfunction renderCustomButton(btn, keyPrefix, idx) {\n\tif (!btn.text || !btn.url) return null;\n\n\treturn (\n\t\t<div className=\"plm-shop-custom\" key={`${keyPrefix}-${idx}`}>\n\t\t\t<a\n\t\t\t\trel=\"nofollow noopener\"\n\t\t\t\thref={btn.url}\n\t\t\t\ttarget={btn.openInNewTab !== false ? \"_blank\" : \"_self\"}\n\t\t\t\tstyle={{\n\t\t\t\t\t...COMMON_STYLES.buttonBase,\n\t\t\t\t\tbackgroundColor: btn.color || DEFAULT_BUTTON_COLOR\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t{btn.text}\n\t\t\t</a>\n\t\t</div>\n\t);\n}\n\n/**\n * ショップボタンレンダリング\n */\nfunction renderShopButton(shopKey, url, style) {\n\treturn (\n\t\t<div className={`plm-shop-${shopKey}`} key={shopKey}>\n\t\t\t<a\n\t\t\t\trel=\"nofollow noopener\"\n\t\t\t\thref={url}\n\t\t\t\ttarget=\"_blank\"\n\t\t\t\tstyle={{\n\t\t\t\t\t...COMMON_STYLES.buttonBase,\n\t\t\t\t\tbackgroundColor: style.backgroundColor\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t{style.text}\n\t\t\t</a>\n\t\t</div>\n\t);\n}\n\n/**\n * ステータスメッセージコンポーネント\n */\nfunction StatusMessage({ type, message }) {\n\tconst styles = {\n\t\tloading: {\n\t\t\t...COMMON_STYLES.statusBox,\n\t\t\tcolor: '#888',\n\t\t\tbackgroundColor: '#f5f5f5',\n\t\t\tborder: '1px dashed #ccc'\n\t\t},\n\t\terror: {\n\t\t\t...COMMON_STYLES.statusBox,\n\t\t\tcolor: '#d63638',\n\t\t\tbackgroundColor: '#fff0f0',\n\t\t\tborder: '1px solid #d63638'\n\t\t},\n\t\tempty: {\n\t\t\t...COMMON_STYLES.statusBox,\n\t\t\tcolor: '#666',\n\t\t\tbackgroundColor: '#f5f5f5',\n\t\t\tborder: '1px dashed #ccc'\n\t\t}\n\t};\n\n\treturn <div style={styles[type]}>{message}</div>;\n}\n\n/**\n * 全ボタンをレンダリングする関数\n */\nfunction renderAllButtons(attributes) {\n\tconst kwArray = attributes.kw.split(',').map(s => s.trim()).filter(Boolean);\n\tconst kwForUrl = kwArray.join(' ');\n\tconst settings = window.ProductLinkMakerSettings || {};\n\tconst buttons = [];\n\n\t// カスタムボタン（前）\n\t(attributes.customButtonsBefore || []).forEach((btn, idx) => {\n\t\tconst customBtn = renderCustomButton(btn, 'custom-before', idx);\n\t\tif (customBtn) buttons.push(customBtn);\n\t});\n\n\t// ショップボタン\n\tif (settings.amazon && attributes.showAmazon !== false) {\n\t\tbuttons.push(renderShopButton('amazon', `https://www.amazon.co.jp/gp/search?keywords=${encodeURIComponent(kwForUrl)}`, BUTTON_STYLES.amazon));\n\t}\n\tif (settings.rakuten && attributes.showRakuten !== false) {\n\t\tbuttons.push(renderShopButton('rakuten', `https://search.rakuten.co.jp/search/mall/${encodeURIComponent(kwForUrl)}/`, BUTTON_STYLES.rakuten));\n\t}\n\tif (settings.yahoo && attributes.showYahoo !== false) {\n\t\tbuttons.push(renderShopButton('yahoo', `https://search.shopping.yahoo.co.jp/search?p=${encodeURIComponent(kwForUrl)}`, BUTTON_STYLES.yahoo));\n\t}\n\tif (settings.mercari && attributes.showMercari !== false) {\n\t\tbuttons.push(renderShopButton('mercari', `https://jp.mercari.com/search?keyword=${encodeURIComponent(kwForUrl)}`, BUTTON_STYLES.mercari));\n\t}\n\tif (settings.dmm && attributes.showDmm !== false) {\n\t\t// DMMは半角スペース区切りでキーワードを渡す\n\t\tconst dmmSearchStr = kwArray.map(kw => encodeURIComponent(kw)).join(' ');\n\t\tconst dmmUrl = `https://www.dmm.com/search/=/searchstr=${dmmSearchStr}/analyze=V1ECCVYAUQQ_/limit=30/sort=rankprofile/?utm_medium=dmm_affiliate&utm_source=dummy&utm_term=dmm.com&utm_campaign=affiliate_link_tool&utm_content=link`;\n\t\tbuttons.push(renderShopButton('dmm', dmmUrl, BUTTON_STYLES.dmm));\n\t}\n\n\t// カスタムボタン（後）\n\t(attributes.customButtonsAfter || []).forEach((btn, idx) => {\n\t\tconst customBtn = renderCustomButton(btn, 'custom-after', idx);\n\t\tif (customBtn) buttons.push(customBtn);\n\t});\n\n\treturn buttons;\n}\n\n/**\n * プレビューコンポーネント\n */\nfunction ProductPreview({ attributes, item, imageUrl, imageKey, itemTitle, itemLink, handleClearCache }) {\n\treturn (\n\t\t<div className=\"plm-product-box\">\n\t\t\t<figure className=\"plm-product-thumb\">\n\t\t\t\t<a rel=\"nofollow noopener\"\n\t\t\t\t\thref={itemLink}\n\t\t\t\t\tclassName=\"plm-product-thumb-link\"\n\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\ttitle={itemTitle}\n\t\t\t\t>\n\t\t\t\t\t{imageUrl && (\n\t\t\t\t\t\t<img\n\t\t\t\t\t\t\tkey={imageKey}\n\t\t\t\t\t\t\tdecoding=\"async\"\n\t\t\t\t\t\t\tsrc={imageUrl}\n\t\t\t\t\t\t\talt={itemTitle || '商品画像'}\n\t\t\t\t\t\t\twidth=\"128\"\n\t\t\t\t\t\t\theight=\"128\"\n\t\t\t\t\t\t\tclassName=\"plm-product-thumb-image\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t</a>\n\t\t\t</figure>\n\t\t\t<div className=\"plm-product-content\">\n\t\t\t\t<div className=\"plm-product-title\">\n\t\t\t\t\t<a rel=\"nofollow noopener\"\n\t\t\t\t\t\thref={itemLink}\n\t\t\t\t\t\tclassName=\"plm-product-title-link\"\n\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\ttitle={itemTitle}\n\t\t\t\t\t>\n\t\t\t\t\t\t{itemTitle ? itemTitle : ''}\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"plm-product-snippet\">\n\t\t\t\t\t{attributes.showShop !== false && (item?.shopName || attributes.shop) && (\n\t\t\t\t\t\t<div className=\"plm-product-maker\">\n\t\t\t\t\t\t\t{item?.shopName || attributes.shop}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t\t{attributes.price && (\n\t\t\t\t\t\t<div className=\"plm-product-price\">\n\t\t\t\t\t\t\t<span className=\"plm-price-value\">\n\t\t\t\t\t\t\t\t{item?.itemPrice ? `￥ ${item.itemPrice}` : '価格情報なし'}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<span className=\"acquired-date\">\n\t\t\t\t\t\t\t\t{item?.itemPrice ? `（${new Date().toLocaleDateString()} 時点）` : ''}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t\t{attributes.desc && (\n\t\t\t\t\t\t<div className=\"plm-product-description\">{attributes.desc}</div>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t\t<div className=\"plm-product-buttons\">\n\t\t\t\t\t{attributes.kw && attributes.kw.split(',').filter(Boolean).length > 0 && renderAllButtons(attributes)}\n\t\t\t\t</div>\n\t\t\t\t<div className=\"product-item-admin\">\n\t\t\t\t\t<Button\n\t\t\t\t\t\tvariant=\"link\"\n\t\t\t\t\t\tonClick={handleClearCache}\n\t\t\t\t\t\tstyle={{ color: '#0073aa', textDecoration: 'underline', cursor: 'pointer', padding: 0, marginRight: '10px' }}\n\t\t\t\t\t>\n\t\t\t\t\t\tキャッシュ削除\n\t\t\t\t\t</Button>\n\t\t\t\t\t<span className=\"product-affiliate-rate\">料率：{item?.affiliateRate ? `${item.affiliateRate}%` : ''}</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport default function Edit({ attributes, setAttributes }) {\n\tconst [item, setItem] = useState(null);\n\tconst [isLoading, setIsLoading] = useState(false);\n\tconst [error, setError] = useState(null);\n\tconst fetchTimeoutRef = useRef(null);\n\n\tconst fetchData = useCallback(async () => {\n\t\tif (!attributes.id && !attributes.no && !attributes.kw) {\n\t\t\tsetItem(null);\n\t\t\tsetAttributes(prev => ({ ...prev, imageUrl: '' }));\n\t\t\treturn;\n\t\t}\n\t\tsetIsLoading(true);\n\t\tsetError(null);\n\t\ttry {\n\t\t\t// キャッシュ削除は行わず、常にキャッシュを利用する\n\t\t\tconst data = await apiFetch({\n\t\t\t\tpath: `/product-link-maker/v1/rakuten/?id=${encodeURIComponent(attributes.id || '')}&kw=${encodeURIComponent(attributes.kw || '')}&no=${encodeURIComponent(attributes.no || '')}`\n\t\t\t});\n\t\t\tif (data?.Items?.[0]?.Item) {\n\t\t\t\tconst newItem = data.Items[0].Item;\n\t\t\t\tsetItem(newItem);\n\t\t\t\tconst apiImage = newItem.mediumImageUrls?.[0]?.imageUrl || '';\n\t\t\t\tsetAttributes(prev => ({ ...prev, imageUrl: apiImage }));\n\t\t\t\tsetError(null);\n\t\t\t} else if (data?.error) {\n\t\t\t\tsetItem(null);\n\t\t\t\tsetAttributes(prev => ({ ...prev, imageUrl: '' }));\n\t\t\t\tsetError('APIエラー: ' + (data.error_description || 'リクエスト制限に達しました。しばらく待ってから再度お試しください。'));\n\t\t\t} else {\n\t\t\t\tsetItem(null);\n\t\t\t\tsetAttributes(prev => ({ ...prev, imageUrl: '' }));\n\t\t\t\tsetError('データが取得できませんでした');\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tconsole.error('Rakuten API fetch error:', error);\n\t\t\tsetItem(null);\n\t\t\tsetAttributes(prev => ({ ...prev, imageUrl: '' }));\n\t\t\tsetError('APIエラーが発生しました。しばらく待ってから再度お試しください。');\n\t\t} finally {\n\t\t\tsetIsLoading(false);\n\t\t}\n\t}, [attributes.id, attributes.no, attributes.kw, setAttributes]);\n\n\t// キャッシュを削除して再取得する関数\n\tconst handleClearCache = useCallback(async () => {\n\t\tif (!window.confirm('本当にキャッシュを削除してもいいですか？')) {\n\t\t\treturn;\n\t\t}\n\t\ttry {\n\t\t\tawait apiFetch({\n\t\t\t\tpath: '/product-link-maker/v1/rakuten-cache/',\n\t\t\t\tmethod: 'POST',\n\t\t\t\tdata: {\n\t\t\t\t\tid: attributes.id,\n\t\t\t\t\tkw: attributes.kw,\n\t\t\t\t\tno: attributes.no,\n\t\t\t\t},\n\t\t\t});\n\t\t\t// キャッシュ削除後、再取得\n\t\t\tfetchData();\n\t\t} catch (error) {\n\t\t\tconsole.error('Cache clear error:', error);\n\t\t}\n\t}, [attributes.id, attributes.kw, attributes.no, fetchData]);\n\n\t// attributesがあれば必ずfetchDataを呼ぶ（デバウンス付き）\n\tuseEffect(() => {\n\t\t// 前回のタイマーをクリア\n\t\tif (fetchTimeoutRef.current) {\n\t\t\tclearTimeout(fetchTimeoutRef.current);\n\t\t}\n\n\t\tif (attributes.id || attributes.no || attributes.kw) {\n\t\t\t// デバウンスを追加\n\t\t\tfetchTimeoutRef.current = setTimeout(() => {\n\t\t\t\tfetchData();\n\t\t\t}, DEBOUNCE_DELAY);\n\t\t} else {\n\t\t\tsetItem(null);\n\t\t}\n\n\t\t// クリーンアップ\n\t\treturn () => {\n\t\t\tif (fetchTimeoutRef.current) {\n\t\t\t\tclearTimeout(fetchTimeoutRef.current);\n\t\t\t}\n\t\t};\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, [attributes.id, attributes.no, attributes.kw]);\n\n\t// 画像・リンク・タイトル等をAPIデータ優先で差し替え\n\tconst [imageKey, setImageKey] = useState(0);\n\tconst imageUrl = attributes.imageUrl || (item && item.mediumImageUrls && item.mediumImageUrls[0] ? item.mediumImageUrls[0].imageUrl : '');\n\tuseEffect(() => {\n\t\tsetImageKey(k => k + 1);\n\t}, [imageUrl]);\n\tconst itemTitle = attributes.title || (item ? item.itemName : '');\n\tconst itemLink = item ? (item.affiliateUrl || item.itemUrl || '#') : '#';\n\n\treturn (\n\t\t<>\n\t\t\t<InspectorControls>\n\t\t\t\t<PanelBody title={__('商品情報設定', 'product-link-maker')} initialOpen={true}>\n\t\t\t\t\t<TextControl\n\t\t\t\t\t\tlabel={__('アイテムコード（ID）', 'product-link-maker')}\n\t\t\t\t\t\thelp={attributes.no ? __('商品番号が入力されている場合は入力できません', 'product-link-maker') : ''}\n\t\t\t\t\t\tvalue={attributes.id}\n\t\t\t\t\t\tdisabled={!!attributes.no}\n\t\t\t\t\t\tonChange={(val) => {\n\t\t\t\t\t\t\tsetAttributes({ id: val, no: '' }); // 入力時にnoをクリア\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tplaceholder=\"book:11830886\"\n\t\t\t\t\t\tstyle={attributes.no ? { backgroundColor: '#f5f5f5', color: '#aaa' } : {}}\n\t\t\t\t\t/>\n\t\t\t\t\t<TextControl\n\t\t\t\t\t\tlabel={__('商品番号', 'product-link-maker')}\n\t\t\t\t\t\thelp={attributes.id ? __('アイテムコード（ID）が入力されている場合は入力できません', 'product-link-maker') : ''}\n\t\t\t\t\t\tvalue={attributes.no}\n\t\t\t\t\t\tdisabled={!!attributes.id}\n\t\t\t\t\t\tonChange={(val) => {\n\t\t\t\t\t\t\tsetAttributes({ no: val, id: '' }); // 入力時にidをクリア\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tplaceholder=\"4902102072625\"\n\t\t\t\t\t\tstyle={attributes.id ? { backgroundColor: '#f5f5f5', color: '#aaa' } : {}}\n\t\t\t\t\t/>\n\t\t\t\t\t<FormTokenField\n\t\t\t\t\t\tlabel={__('キーワード指定', 'product-link-maker')}\n\t\t\t\t\t\tvalue={attributes.kw ? attributes.kw.split(',').filter(Boolean) : []}\n\t\t\t\t\t\tonChange={(tokens) => setAttributes({ kw: tokens.join(',') })}\n\t\t\t\t\t\tplaceholder={__('キーワードを入力してEnter', 'product-link-maker')}\n\t\t\t\t\t/>\n\t\t\t\t\t<TextControl\n\t\t\t\t\t\tlabel={__('ショップコード', 'product-link-maker')}\n\t\t\t\t\t\tvalue={attributes.shop}\n\t\t\t\t\t\tonChange={(val) => setAttributes({ shop: val })}\n\t\t\t\t\t/>\n\t\t\t\t\t<FormTokenField\n\t\t\t\t\t\tlabel={__('サーチ', 'product-link-maker')}\n\t\t\t\t\t\tvalue={attributes.search ? attributes.search.split(',').filter(Boolean) : []}\n\t\t\t\t\t\tonChange={(tokens) => setAttributes({ search: tokens.join(',') })}\n\t\t\t\t\t\tplaceholder={__('サーチを入力してEnter', 'product-link-maker')}\n\t\t\t\t\t/>\n\t\t\t\t\t<TextareaControl\n\t\t\t\t\t\tlabel={__('タイトル', 'product-link-maker')}\n\t\t\t\t\t\tvalue={attributes.title}\n\t\t\t\t\t\tonChange={(val) => setAttributes({ title: val })}\n\t\t\t\t\t/>\n\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\tlabel={__('店名表示', 'product-link-maker')}\n\t\t\t\t\t\tchecked={attributes.showShop !== false}\n\t\t\t\t\t\tonChange={(val) => setAttributes({ showShop: val })}\n\t\t\t\t\t/>\n\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\tlabel={__('価格表示', 'product-link-maker')}\n\t\t\t\t\t\tchecked={attributes.price}\n\t\t\t\t\t\tonChange={(val) => setAttributes({ price: val })}\n\t\t\t\t\t/>\n\t\t\t\t\t<TextareaControl\n\t\t\t\t\t\tlabel={__('説明文', 'product-link-maker')}\n\t\t\t\t\t\tvalue={attributes.desc}\n\t\t\t\t\t\tonChange={(val) => setAttributes({ desc: val })}\n\t\t\t\t\t/>\n\t\t\t\t\t<Heading>画像アップロード</Heading>\n\t\t\t\t\t<MediaUploadCheck>\n\t\t\t\t\t\t<div style={{ marginBottom: '0' }}>\n\t\t\t\t\t\t\t{(attributes.imageUrl !== '' ? attributes.imageUrl : item?.mediumImageUrls?.[0]?.imageUrl) && (\n\t\t\t\t\t\t\t\t<div style={{ marginBottom: '10px', display: 'flex', justifyContent: 'center', backgroundColor: '#eee' }}>\n\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\tsrc={attributes.imageUrl !== '' ? attributes.imageUrl : item?.mediumImageUrls?.[0]?.imageUrl}\n\t\t\t\t\t\t\t\t\t\talt=\"\"\n\t\t\t\t\t\t\t\t\t\tstyle={{ display: 'block' }}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t<MediaUpload\n\t\t\t\t\t\t\t\tonSelect={(media) => setAttributes({ imageUrl: media.url || '' })}\n\t\t\t\t\t\t\t\tallowedTypes={['image']}\n\t\t\t\t\t\t\t\trender={({ open }) => (\n\t\t\t\t\t\t\t\t\t<Flex>\n\t\t\t\t\t\t\t\t\t\t<Button onClick={open} variant=\"secondary\">\n\t\t\t\t\t\t\t\t\t\t\t画像を選択\n\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t{attributes.imageUrl && (\n\t\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\t\tstyle={{ marginTop: 4 }}\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => setAttributes({ imageUrl: '' })}\n\t\t\t\t\t\t\t\t\t\t\t\tisDestructive\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t{__('画像をリセット', 'product-link-maker')}\n\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t</Flex>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</MediaUploadCheck>\n\n\t\t\t\t\t<div style={{ margin: '24px 0 0 0' }} />\n\t\t\t\t\t<Heading>ボタン表示設定</Heading>\n\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\tlabel={__('Amazonボタンを表示', 'product-link-maker')}\n\t\t\t\t\t\tchecked={attributes.showAmazon !== false}\n\t\t\t\t\t\tonChange={val => setAttributes({ showAmazon: val })}\n\t\t\t\t\t/>\n\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\tlabel={__('楽天ボタンを表示', 'product-link-maker')}\n\t\t\t\t\t\tchecked={attributes.showRakuten !== false}\n\t\t\t\t\t\tonChange={val => setAttributes({ showRakuten: val })}\n\t\t\t\t\t/>\n\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\tlabel={__('Yahoo!ボタンを表示', 'product-link-maker')}\n\t\t\t\t\t\tchecked={attributes.showYahoo !== false}\n\t\t\t\t\t\tonChange={val => setAttributes({ showYahoo: val })}\n\t\t\t\t\t/>\n\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\tlabel={__('メルカリボタンを表示', 'product-link-maker')}\n\t\t\t\t\t\tchecked={attributes.showMercari !== false}\n\t\t\t\t\t\tonChange={val => setAttributes({ showMercari: val })}\n\t\t\t\t\t/>\n\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\tlabel={__('DMMボタンを表示', 'product-link-maker')}\n\t\t\t\t\t\tchecked={attributes.showDmm !== false}\n\t\t\t\t\t\tonChange={val => setAttributes({ showDmm: val })}\n\t\t\t\t\t/>\n\n\t\t\t\t</PanelBody>\n\t\t\t\t<PanelBody title={__('カスタムボタン（前）', 'product-link-maker')} initialOpen={true}>\n\t\t\t\t\t<CustomButtonEditor\n\t\t\t\t\t\tbuttons={attributes.customButtonsBefore || []}\n\t\t\t\t\t\tonChange={(newButtons) => setAttributes({ customButtonsBefore: newButtons })}\n\t\t\t\t\t\tlabel=\"既存のボタンの前に表示されるカスタムボタンを追加できます\"\n\t\t\t\t\t/>\n\t\t\t\t</PanelBody>\n\t\t\t\t<PanelBody title={__('カスタムボタン（後）', 'product-link-maker')} initialOpen={true}>\n\t\t\t\t\t<CustomButtonEditor\n\t\t\t\t\t\tbuttons={attributes.customButtonsAfter || []}\n\t\t\t\t\t\tonChange={(newButtons) => setAttributes({ customButtonsAfter: newButtons })}\n\t\t\t\t\t\tlabel=\"既存のボタンの後に表示されるカスタムボタンを追加できます\"\n\t\t\t\t\t/>\n\t\t\t\t</PanelBody>\n\t\t\t\t<PanelBody title={__('アフィリエイト設定', 'product-link-maker')} initialOpen={false}>\n\t\t\t\t\t<Button\n\t\t\t\t\t\thref={`${window.location.origin}/wp-admin/options-general.php?page=product-link-maker`}\n\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\tclassName=\"\"\n\t\t\t\t\t\tvariant=\"primary\"\n\t\t\t\t\t\ticon=\"admin-generic\"\n\t\t\t\t\t\tstyle={{ marginTop: '5px', width: '100%', textAlign: 'center' }}\n\t\t\t\t\t>\n\t\t\t\t\t\t{__('アフィリエイト設定', 'product-link-maker')}\n\t\t\t\t\t</Button>\n\t\t\t\t</PanelBody>\n\t\t\t</InspectorControls>\n\t\t\t<div {...useBlockProps()}>\n\t\t\t\t{isLoading ? (\n\t\t\t\t\t<StatusMessage type=\"loading\" message=\"Loading...\" />\n\t\t\t\t) : error ? (\n\t\t\t\t\t<StatusMessage type=\"error\" message={error} />\n\t\t\t\t) : !attributes.id && !attributes.no && !attributes.kw ? (\n\t\t\t\t\t<StatusMessage type=\"empty\" message=\"商品情報を設定してください\" />\n\t\t\t\t) : (\n\t\t\t\t\t<ProductPreview\n\t\t\t\t\t\tattributes={attributes}\n\t\t\t\t\t\titem={item}\n\t\t\t\t\t\timageUrl={imageUrl}\n\t\t\t\t\t\timageKey={imageKey}\n\t\t\t\t\t\titemTitle={itemTitle}\n\t\t\t\t\t\titemLink={itemLink}\n\t\t\t\t\t\thandleClearCache={handleClearCache}\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t</>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport {};","/**\n * Registers a new block provided a unique name and an object defining its behavior.\n *\n * @see https://developer.wordpress.org/block-editor/reference-guides/block-api/block-registration/\n */\nimport { registerBlockType } from '@wordpress/blocks';\n\n/**\n * Lets webpack process CSS, SASS or SCSS files referenced in JavaScript files.\n * All files containing `style` keyword are bundled together. The code used\n * gets applied both to the front of your site and to the editor.\n *\n * @see https://www.npmjs.com/package/@wordpress/scripts#using-css\n */\nimport './style.scss';\n\n/**\n * Internal dependencies\n */\nimport Edit from './edit';\nimport metadata from './block.json';\n\n/**\n * Every block starts by registering a new block type definition.\n *\n * @see https://developer.wordpress.org/block-editor/reference-guides/block-api/block-registration/\n */\nregisterBlockType(metadata.name, {\n\t/**\n\t * @see ./edit.js\n\t */\n\tedit: Edit,\n});\n","// extracted by mini-css-extract-plugin\nexport {};","module.exports = window[\"wp\"][\"apiFetch\"];","module.exports = window[\"wp\"][\"blockEditor\"];","module.exports = window[\"wp\"][\"blocks\"];","module.exports = window[\"wp\"][\"components\"];","module.exports = window[\"wp\"][\"element\"];","module.exports = window[\"wp\"][\"i18n\"];","module.exports = window[\"ReactJSXRuntime\"];","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t\"rakuten/index\": 0,\n\t\"rakuten/style-index\": 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = globalThis[\"webpackChunkproduct_link_maker\"] = globalThis[\"webpackChunkproduct_link_maker\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [\"rakuten/style-index\"], () => (__webpack_require__(\"./src/rakuten/index.js\")))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n",""],"names":["__","useBlockProps","MediaUpload","InspectorControls","MediaUploadCheck","PanelBody","TextControl","ToggleControl","TextareaControl","FormTokenField","Button","Flex","__experimentalHeading","Heading","ColorPicker","Card","CardHeader","CardBody","Icon","useEffect","useState","useRef","useCallback","apiFetch","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","DEFAULT_BUTTON_COLOR","DEBOUNCE_DELAY","COMMON_STYLES","buttonBase","color","borderRadius","padding","display","textDecoration","statusBox","textAlign","CustomButtonEditor","buttons","onChange","label","children","style","fontSize","marginTop","map","btn","index","marginBottom","border","justify","align","fontWeight","isDestructive","isSmall","onClick","newButtons","splice","icon","value","text","val","placeholder","url","checked","openInNewTab","variant","showColorPicker","width","marginLeft","height","backgroundColor","verticalAlign","enableAlpha","defaultValue","justifyContent","BUTTON_STYLES","amazon","rakuten","yahoo","mercari","dmm","renderCustomButton","keyPrefix","idx","className","rel","href","target","renderShopButton","shopKey","StatusMessage","type","message","styles","loading","error","empty","renderAllButtons","attributes","kwArray","kw","split","s","trim","filter","Boolean","kwForUrl","join","settings","window","ProductLinkMakerSettings","customButtonsBefore","forEach","customBtn","push","showAmazon","encodeURIComponent","showRakuten","showYahoo","showMercari","showDmm","dmmSearchStr","dmmUrl","customButtonsAfter","ProductPreview","item","imageUrl","imageKey","itemTitle","itemLink","handleClearCache","title","decoding","src","alt","showShop","shopName","shop","price","itemPrice","Date","toLocaleDateString","desc","length","cursor","marginRight","affiliateRate","Edit","setAttributes","setItem","isLoading","setIsLoading","setError","fetchTimeoutRef","fetchData","id","no","prev","data","path","Items","Item","newItem","apiImage","mediumImageUrls","error_description","console","confirm","method","current","clearTimeout","setTimeout","setImageKey","k","itemName","affiliateUrl","itemUrl","initialOpen","help","disabled","tokens","search","onSelect","media","allowedTypes","render","open","margin","location","origin","registerBlockType","metadata","name","edit"],"sourceRoot":""}