{"version":3,"file":"rakuten/index.js","mappings":"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","sources":["webpack://product-link-maker/./src/rakuten/edit.js","webpack://product-link-maker/./src/rakuten/editor.scss","webpack://product-link-maker/./src/rakuten/index.js","webpack://product-link-maker/./src/rakuten/style.scss?4153","webpack://product-link-maker/external window [\"wp\",\"apiFetch\"]","webpack://product-link-maker/external window [\"wp\",\"blockEditor\"]","webpack://product-link-maker/external window [\"wp\",\"blocks\"]","webpack://product-link-maker/external window [\"wp\",\"components\"]","webpack://product-link-maker/external window [\"wp\",\"element\"]","webpack://product-link-maker/external window [\"wp\",\"i18n\"]","webpack://product-link-maker/external window \"ReactJSXRuntime\"","webpack://product-link-maker/webpack/bootstrap","webpack://product-link-maker/webpack/runtime/chunk loaded","webpack://product-link-maker/webpack/runtime/compat get default export","webpack://product-link-maker/webpack/runtime/define property getters","webpack://product-link-maker/webpack/runtime/hasOwnProperty shorthand","webpack://product-link-maker/webpack/runtime/make namespace object","webpack://product-link-maker/webpack/runtime/jsonp chunk loading","webpack://product-link-maker/webpack/before-startup","webpack://product-link-maker/webpack/startup","webpack://product-link-maker/webpack/after-startup"],"sourcesContent":["import { __ } from '@wordpress/i18n';\nimport { useBlockProps, MediaUpload, InspectorControls, MediaUploadCheck } from '@wordpress/block-editor';\nimport { PanelBody, TextControl, ToggleControl, TextareaControl, FormTokenField, Button, Flex, __experimentalHeading as Heading } from '@wordpress/components';\n\n// import './style.scss';\nimport './editor.scss';\n\nimport { useEffect, useState, useRef, useCallback } from '@wordpress/element';\nimport apiFetch from '@wordpress/api-fetch';\n\nexport default function Edit({ attributes, setAttributes }) {\n\tconst [item, setItem] = useState(null);\n\tconst [isLoading, setIsLoading] = useState(false);\n\tconst [error, setError] = useState(null);\n\tconst fetchTimeoutRef = useRef(null);\n\n\tconst fetchData = useCallback(async () => {\n\t\tif (!attributes.id && !attributes.no && !attributes.kw) {\n\t\t\tsetItem(null);\n\t\t\tsetAttributes(prev => ({ ...prev, imageUrl: '' }));\n\t\t\treturn;\n\t\t}\n\t\tsetIsLoading(true);\n\t\tsetError(null);\n\t\ttry {\n\t\t\t// キャッシュ削除は行わず、常にキャッシュを利用する\n\t\t\tconst data = await apiFetch({\n\t\t\t\tpath: `/myplugin/v1/rakuten/?id=${encodeURIComponent(attributes.id || '')}&kw=${encodeURIComponent(attributes.kw || '')}&no=${encodeURIComponent(attributes.no || '')}`\n\t\t\t});\n\t\t\tif (data?.Items?.[0]?.Item) {\n\t\t\t\tconst newItem = data.Items[0].Item;\n\t\t\t\tsetItem(newItem);\n\t\t\t\tconst apiImage = newItem.mediumImageUrls?.[0]?.imageUrl || '';\n\t\t\t\tsetAttributes(prev => ({ ...prev, imageUrl: apiImage }));\n\t\t\t\tsetError(null);\n\t\t\t} else if (data?.error) {\n\t\t\t\tsetItem(null);\n\t\t\t\tsetAttributes(prev => ({ ...prev, imageUrl: '' }));\n\t\t\t\tsetError('APIエラー: ' + (data.error_description || 'リクエスト制限に達しました。しばらく待ってから再度お試しください。'));\n\t\t\t} else {\n\t\t\t\tsetItem(null);\n\t\t\t\tsetAttributes(prev => ({ ...prev, imageUrl: '' }));\n\t\t\t\tsetError('データが取得できませんでした');\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tconsole.error('Rakuten API fetch error:', error);\n\t\t\tsetItem(null);\n\t\t\tsetAttributes(prev => ({ ...prev, imageUrl: '' }));\n\t\t\tsetError('APIエラーが発生しました。しばらく待ってから再度お試しください。');\n\t\t} finally {\n\t\t\tsetIsLoading(false);\n\t\t}\n\t}, [attributes.id, attributes.no, attributes.kw, setAttributes]);\n\n\t// キャッシュを削除して再取得する関数\n\tconst handleClearCache = useCallback(async () => {\n\t\tif (!window.confirm('本当にキャッシュを削除してもいいですか？')) {\n\t\t\treturn;\n\t\t}\n\t\ttry {\n\t\t\tawait apiFetch({\n\t\t\t\tpath: '/myplugin/v1/rakuten-cache/',\n\t\t\t\tmethod: 'POST',\n\t\t\t\tdata: {\n\t\t\t\t\tid: attributes.id,\n\t\t\t\t\tkw: attributes.kw,\n\t\t\t\t\tno: attributes.no,\n\t\t\t\t},\n\t\t\t});\n\t\t\t// キャッシュ削除後、再取得\n\t\t\tfetchData();\n\t\t} catch (error) {\n\t\t\tconsole.error('Cache clear error:', error);\n\t\t}\n\t}, [attributes.id, attributes.kw, attributes.no, fetchData]);\n\n\t// attributesがあれば必ずfetchDataを呼ぶ（デバウンス付き）\n\tuseEffect(() => {\n\t\t// 前回のタイマーをクリア\n\t\tif (fetchTimeoutRef.current) {\n\t\t\tclearTimeout(fetchTimeoutRef.current);\n\t\t}\n\n\t\tif (attributes.id || attributes.no || attributes.kw) {\n\t\t\t// 1秒のデバウンスを追加\n\t\t\tfetchTimeoutRef.current = setTimeout(() => {\n\t\t\t\tfetchData();\n\t\t\t}, 1000);\n\t\t} else {\n\t\t\tsetItem(null);\n\t\t}\n\n\t\t// クリーンアップ\n\t\treturn () => {\n\t\t\tif (fetchTimeoutRef.current) {\n\t\t\t\tclearTimeout(fetchTimeoutRef.current);\n\t\t\t}\n\t\t};\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, [attributes.id, attributes.no, attributes.kw]);\n\n\t// 画像・リンク・タイトル等をAPIデータ優先で差し替え\n\tconst [imageKey, setImageKey] = useState(0);\n\tconst imageUrl = attributes.imageUrl || (item && item.mediumImageUrls && item.mediumImageUrls[0] ? item.mediumImageUrls[0].imageUrl : '');\n\tuseEffect(() => {\n\t\tsetImageKey(k => k + 1);\n\t}, [imageUrl]);\n\tconst itemTitle = attributes.title || (item ? item.itemName : '');\n\tconst itemLink = item ? (item.affiliateUrl || item.itemUrl || '#') : '#';\n\n\treturn (\n\t\t<>\n\t\t\t<InspectorControls>\n\t\t\t\t<PanelBody title={__('商品情報設定', 'rakuten')} initialOpen={true}>\n\t\t\t\t\t<TextControl\n\t\t\t\t\t\tlabel={__('アイテムコード（ID）', 'rakuten')}\n\t\t\t\t\t\thelp={attributes.no ? __('商品番号が入力されている場合は入力できません', 'rakuten') : ''}\n\t\t\t\t\t\tvalue={attributes.id}\n\t\t\t\t\t\tdisabled={!!attributes.no}\n\t\t\t\t\t\tonChange={(val) => {\n\t\t\t\t\t\t\tsetAttributes({ id: val, no: '' }); // 入力時にnoをクリア\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tstyle={attributes.no ? { backgroundColor: '#f5f5f5', color: '#aaa' } : {}}\n\t\t\t\t\t/>\n\t\t\t\t\t<TextControl\n\t\t\t\t\t\tlabel={__('商品番号', 'rakuten')}\n\t\t\t\t\t\thelp={attributes.id ? __('アイテムコード（ID）が入力されている場合は入力できません', 'rakuten') : ''}\n\t\t\t\t\t\tvalue={attributes.no}\n\t\t\t\t\t\tdisabled={!!attributes.id}\n\t\t\t\t\t\tonChange={(val) => {\n\t\t\t\t\t\t\tsetAttributes({ no: val, id: '' }); // 入力時にidをクリア\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tstyle={attributes.id ? { backgroundColor: '#f5f5f5', color: '#aaa' } : {}}\n\t\t\t\t\t/>\n\t\t\t\t\t<FormTokenField\n\t\t\t\t\t\tlabel={__('キーワード指定', 'rakuten')}\n\t\t\t\t\t\tvalue={attributes.kw ? attributes.kw.split(',').filter(Boolean) : []}\n\t\t\t\t\t\tonChange={(tokens) => setAttributes({ kw: tokens.join(',') })}\n\t\t\t\t\t\tplaceholder={__('キーワードを入力してEnter', 'rakuten')}\n\t\t\t\t\t/>\n\t\t\t\t\t<TextControl\n\t\t\t\t\t\tlabel={__('ショップコード', 'rakuten')}\n\t\t\t\t\t\tvalue={attributes.shop}\n\t\t\t\t\t\tonChange={(val) => setAttributes({ shop: val })}\n\t\t\t\t\t/>\n\t\t\t\t\t<FormTokenField\n\t\t\t\t\t\tlabel={__('サーチ', 'rakuten')}\n\t\t\t\t\t\tvalue={attributes.search ? attributes.search.split(',').filter(Boolean) : []}\n\t\t\t\t\t\tonChange={(tokens) => setAttributes({ search: tokens.join(',') })}\n\t\t\t\t\t\tplaceholder={__('サーチを入力してEnter', 'rakuten')}\n\t\t\t\t\t/>\n\t\t\t\t\t<TextareaControl\n\t\t\t\t\t\tlabel={__('タイトル', 'rakuten')}\n\t\t\t\t\t\tvalue={attributes.title}\n\t\t\t\t\t\tonChange={(val) => setAttributes({ title: val })}\n\t\t\t\t\t/>\n\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\tlabel={__('価格表示', 'rakuten')}\n\t\t\t\t\t\tchecked={attributes.price}\n\t\t\t\t\t\tonChange={(val) => setAttributes({ price: val })}\n\t\t\t\t\t/>\n\t\t\t\t\t<TextareaControl\n\t\t\t\t\t\tlabel={__('説明文', 'rakuten')}\n\t\t\t\t\t\tvalue={attributes.desc}\n\t\t\t\t\t\tonChange={(val) => setAttributes({ desc: val })}\n\t\t\t\t\t/>\n\t\t\t\t\t<Heading>画像アップロード</Heading>\n\t\t\t\t\t<MediaUploadCheck>\n\t\t\t\t\t\t<div style={{ marginBottom: '0' }}>\n\t\t\t\t\t\t\t{(attributes.imageUrl !== '' ? attributes.imageUrl : item?.mediumImageUrls?.[0]?.imageUrl) && (\n\t\t\t\t\t\t\t\t<div style={{ marginBottom: '10px', display: 'flex', justifyContent: 'center', backgroundColor: '#eee' }}>\n\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\tsrc={attributes.imageUrl !== '' ? attributes.imageUrl : item?.mediumImageUrls?.[0]?.imageUrl}\n\t\t\t\t\t\t\t\t\t\talt=\"\"\n\t\t\t\t\t\t\t\t\t\tstyle={{ display: 'block' }}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t<MediaUpload\n\t\t\t\t\t\t\t\tonSelect={(media) => setAttributes({ imageUrl: media.url || '' })}\n\t\t\t\t\t\t\t\tallowedTypes={['image']}\n\t\t\t\t\t\t\t\trender={({ open }) => (\n\t\t\t\t\t\t\t\t\t<Flex>\n\t\t\t\t\t\t\t\t\t\t<Button onClick={open} variant=\"secondary\">\n\t\t\t\t\t\t\t\t\t\t\t画像を選択\n\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t{attributes.imageUrl && (\n\t\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\t\tstyle={{ marginTop: 4 }}\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => setAttributes({ imageUrl: '' })}\n\t\t\t\t\t\t\t\t\t\t\t\tisDestructive\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t{__('画像をリセット', 'rakuten')}\n\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t</Flex>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</MediaUploadCheck>\n\n\t\t\t\t\t<div style={{ margin: '24px 0 0 0' }} />\n\t\t\t\t\t<Heading>ボタン表示設定</Heading>\n\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\tlabel={__('Amazonボタンを表示', 'rakuten')}\n\t\t\t\t\t\tchecked={attributes.showAmazon !== false}\n\t\t\t\t\t\tonChange={val => setAttributes({ showAmazon: val })}\n\t\t\t\t\t/>\n\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\tlabel={__('楽天ボタンを表示', 'rakuten')}\n\t\t\t\t\t\tchecked={attributes.showRakuten !== false}\n\t\t\t\t\t\tonChange={val => setAttributes({ showRakuten: val })}\n\t\t\t\t\t/>\n\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\tlabel={__('Yahoo!ボタンを表示', 'rakuten')}\n\t\t\t\t\t\tchecked={attributes.showYahoo !== false}\n\t\t\t\t\t\tonChange={val => setAttributes({ showYahoo: val })}\n\t\t\t\t\t/>\n\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\tlabel={__('メルカリボタンを表示', 'rakuten')}\n\t\t\t\t\t\tchecked={attributes.showMercari !== false}\n\t\t\t\t\t\tonChange={val => setAttributes({ showMercari: val })}\n\t\t\t\t\t/>\n\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\tlabel={__('DMMボタンを表示', 'rakuten')}\n\t\t\t\t\t\tchecked={attributes.showDmm !== false}\n\t\t\t\t\t\tonChange={val => setAttributes({ showDmm: val })}\n\t\t\t\t\t/>\n\n\t\t\t\t</PanelBody>\n\t\t\t\t<PanelBody title={__('アフィリエイト設定', 'rakuten')} initialOpen={false}>\n\t\t\t\t\t<Button\n\t\t\t\t\t\thref={`${window.location.origin}/wp-admin/admin.php?page=affiliate-settings`}\n\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\tclassName=\"\"\n\t\t\t\t\t\tvariant=\"primary\"\n\t\t\t\t\t\ticon=\"admin-generic\"\n\t\t\t\t\t\tstyle={{ marginTop: '5px', width: '100%', textAlign: 'center' }}\n\t\t\t\t\t>\n\t\t\t\t\t\t{__('アフィリエイト設定', 'rakuten')}\n\t\t\t\t\t</Button>\n\t\t\t\t</PanelBody>\n\t\t\t</InspectorControls>\n\t\t\t<div {...useBlockProps()}>\n\t\t\t\t{isLoading ? (\n\t\t\t\t\t<div style={{ padding: '32px', textAlign: 'center', color: '#888', backgroundColor: '#f5f5f5', border: '1px dashed #ccc', borderRadius: '4px' }}>\n\t\t\t\t\t\tLoading...\n\t\t\t\t\t</div>\n\t\t\t\t) : error ? (\n\t\t\t\t\t<div style={{ padding: '32px', textAlign: 'center', color: '#d63638', backgroundColor: '#fff0f0', border: '1px solid #d63638', borderRadius: '4px' }}>\n\t\t\t\t\t\t{error}\n\t\t\t\t\t</div>\n\t\t\t\t) : !attributes.id && !attributes.no && !attributes.kw ? (\n\t\t\t\t\t<div style={{ padding: '32px', textAlign: 'center', color: '#666', backgroundColor: '#f5f5f5', border: '1px dashed #ccc', borderRadius: '4px' }}>\n\t\t\t\t\t\t商品情報を設定してください\n\t\t\t\t\t</div>\n\t\t\t\t) : (\n\t\t\t\t\t<div className=\"rakuten-item-box product-item-box no-icon pis-m\">\n\t\t\t\t\t\t<figure className=\"rakuten-item-thumb product-item-thumb\">\n\t\t\t\t\t\t\t<a rel=\"nofollow noopener\"\n\t\t\t\t\t\t\t\thref={itemLink}\n\t\t\t\t\t\t\t\tclassName=\"rakuten-item-thumb-link product-item-thumb-link\"\n\t\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\t\ttitle={itemTitle}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{imageUrl && (\n\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\tkey={imageKey}\n\t\t\t\t\t\t\t\t\t\tdecoding=\"async\"\n\t\t\t\t\t\t\t\t\t\tsrc={imageUrl}\n\t\t\t\t\t\t\t\t\t\talt={itemTitle || '商品画像'}\n\t\t\t\t\t\t\t\t\t\twidth=\"128\"\n\t\t\t\t\t\t\t\t\t\theight=\"128\"\n\t\t\t\t\t\t\t\t\t\tclassName=\"rakuten-item-thumb-image product-item-thumb-image\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</figure>\n\t\t\t\t\t\t<div className=\"rakuten-item-content product-item-content cf\">\n\t\t\t\t\t\t\t<div className=\"rakuten-item-title product-item-title\">\n\t\t\t\t\t\t\t\t<a rel=\"nofollow noopener\"\n\t\t\t\t\t\t\t\t\thref={itemLink}\n\t\t\t\t\t\t\t\t\tclassName=\"rakuten-item-title-link product-item-title-link\"\n\t\t\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\t\t\ttitle={itemTitle}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{itemTitle ? itemTitle : ''}\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"rakuten-item-snippet product-item-snippet\">\n\t\t\t\t\t\t\t\t{(item?.shopName || attributes.shop) && (\n\t\t\t\t\t\t\t\t\t<div className=\"rakuten-item-maker product-item-maker\">\n\t\t\t\t\t\t\t\t\t\t{item?.shopName || attributes.shop}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t{attributes.price && (\n\t\t\t\t\t\t\t\t\t<div className=\"product-item-price\">\n\t\t\t\t\t\t\t\t\t\t<span className=\"item-price\">\n\t\t\t\t\t\t\t\t\t\t\t{item?.itemPrice ? `￥ ${item.itemPrice}` : '価格情報なし'}\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t<span className=\"acquired-date\">\n\t\t\t\t\t\t\t\t\t\t\t{item?.itemPrice ? `（${new Date().toLocaleDateString()} 時点）` : ''}\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t{attributes.desc && (\n\t\t\t\t\t\t\t\t\t<div className=\"product-item-description\">{attributes.desc}</div>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"amazon-item-buttons product-item-buttons\">\n\t\t\t\t\t\t\t\t{attributes.kw && attributes.kw.split(',').filter(Boolean).length > 0 && (() => {\n\t\t\t\t\t\t\t\t\tconst kwArray = attributes.kw.split(',').map(s => s.trim()).filter(Boolean);\n\t\t\t\t\t\t\t\t\tconst kwForUrl = kwArray.join(' ');\n\t\t\t\t\t\t\t\t\tconst settings = window.MyAffiliateSettings || {};\n\t\t\t\t\t\t\t\t\tconst buttons = [];\n\t\t\t\t\t\t\t\t\tif (settings.amazon && attributes.showAmazon !== false) {\n\t\t\t\t\t\t\t\t\t\tbuttons.push(\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"shoplinkamazon\" key=\"amazon\">\n\t\t\t\t\t\t\t\t\t\t\t\t<a rel=\"nofollow noopener\" href={`https://www.amazon.co.jp/gp/search?keywords=${encodeURIComponent(kwForUrl)}`} target=\"_blank\" style={{ backgroundColor: '#f79901', color: '#fff', borderRadius: '4px', padding: '6px 16px', display: 'inline-block', marginRight: '6px', textDecoration: 'none' }}>Amazon</a>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tif (settings.rakuten && attributes.showRakuten !== false) {\n\t\t\t\t\t\t\t\t\t\tbuttons.push(\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"shoplinkrakuten\" key=\"rakuten\">\n\t\t\t\t\t\t\t\t\t\t\t\t<a rel=\"nofollow noopener\" href={`https://search.rakuten.co.jp/search/mall/${encodeURIComponent(kwForUrl)}/`} target=\"_blank\" style={{ backgroundColor: '#bf0000', color: '#fff', borderRadius: '4px', padding: '6px 16px', display: 'inline-block', marginRight: '6px', textDecoration: 'none' }}>楽天</a>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tif (settings.yahoo && attributes.showYahoo !== false) {\n\t\t\t\t\t\t\t\t\t\tbuttons.push(\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"shoplinkyahoo\" key=\"yahoo\">\n\t\t\t\t\t\t\t\t\t\t\t\t<a rel=\"nofollow noopener\" href={`https://search.shopping.yahoo.co.jp/search?p=${encodeURIComponent(kwForUrl)}`} target=\"_blank\" style={{ backgroundColor: '#e60033', color: '#fff', borderRadius: '4px', padding: '6px 16px', display: 'inline-block', marginRight: '6px', textDecoration: 'none' }}>Yahoo!ショッピング</a>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tif (settings.mercari && attributes.showMercari !== false) {\n\t\t\t\t\t\t\t\t\t\tbuttons.push(\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"shoplinkmercari\" key=\"mercari\">\n\t\t\t\t\t\t\t\t\t\t\t\t<a rel=\"nofollow noopener\" href={`https://jp.mercari.com/search?keyword=${encodeURIComponent(kwForUrl)}`} target=\"_blank\" style={{ backgroundColor: '#4dc9ff', color: '#fff', borderRadius: '4px', padding: '6px 16px', display: 'inline-block', marginRight: '6px', textDecoration: 'none' }}>メルカリ</a>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tif (settings.dmm && attributes.showDmm !== false) {\n\t\t\t\t\t\t\t\t\t\tbuttons.push(\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"shoplinkdmm\" key=\"dmm\">\n\t\t\t\t\t\t\t\t\t\t\t\t<a rel=\"nofollow noopener\" href={`https://www.dmm.com/search/=/searchstr=${encodeURIComponent(kwForUrl)}/`} target=\"_blank\" style={{ backgroundColor: '#00bcd4', color: '#fff', borderRadius: '4px', padding: '6px 16px', display: 'inline-block', marginRight: '6px', textDecoration: 'none' }}>DMM</a>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\treturn buttons;\n\t\t\t\t\t\t\t\t})()}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"product-item-admin\">\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\tvariant=\"link\"\n\t\t\t\t\t\t\t\t\tonClick={handleClearCache}\n\t\t\t\t\t\t\t\t\tstyle={{ color: '#0073aa', textDecoration: 'underline', cursor: 'pointer', padding: 0, marginRight: '10px' }}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tキャッシュ削除\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t<span className=\"product-affiliate-rate\">料率：{item?.affiliateRate ? `${item.affiliateRate}%` : ''}</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t</>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport {};","/**\n * Registers a new block provided a unique name and an object defining its behavior.\n *\n * @see https://developer.wordpress.org/block-editor/reference-guides/block-api/block-registration/\n */\nimport { registerBlockType } from '@wordpress/blocks';\n\n/**\n * Lets webpack process CSS, SASS or SCSS files referenced in JavaScript files.\n * All files containing `style` keyword are bundled together. The code used\n * gets applied both to the front of your site and to the editor.\n *\n * @see https://www.npmjs.com/package/@wordpress/scripts#using-css\n */\nimport './style.scss';\n\n/**\n * Internal dependencies\n */\nimport Edit from './edit';\nimport metadata from './block.json';\n\n/**\n * Every block starts by registering a new block type definition.\n *\n * @see https://developer.wordpress.org/block-editor/reference-guides/block-api/block-registration/\n */\nregisterBlockType(metadata.name, {\n\t/**\n\t * @see ./edit.js\n\t */\n\tedit: Edit,\n});\n","// extracted by mini-css-extract-plugin\nexport {};","module.exports = window[\"wp\"][\"apiFetch\"];","module.exports = window[\"wp\"][\"blockEditor\"];","module.exports = window[\"wp\"][\"blocks\"];","module.exports = window[\"wp\"][\"components\"];","module.exports = window[\"wp\"][\"element\"];","module.exports = window[\"wp\"][\"i18n\"];","module.exports = window[\"ReactJSXRuntime\"];","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t\"rakuten/index\": 0,\n\t\"rakuten/style-index\": 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = globalThis[\"webpackChunkproduct_link_maker\"] = globalThis[\"webpackChunkproduct_link_maker\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [\"rakuten/style-index\"], () => (__webpack_require__(\"./src/rakuten/index.js\")))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n",""],"names":["__","useBlockProps","MediaUpload","InspectorControls","MediaUploadCheck","PanelBody","TextControl","ToggleControl","TextareaControl","FormTokenField","Button","Flex","__experimentalHeading","Heading","useEffect","useState","useRef","useCallback","apiFetch","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Edit","attributes","setAttributes","item","setItem","isLoading","setIsLoading","error","setError","fetchTimeoutRef","fetchData","id","no","kw","prev","imageUrl","data","path","encodeURIComponent","Items","Item","newItem","apiImage","mediumImageUrls","error_description","console","handleClearCache","window","confirm","method","current","clearTimeout","setTimeout","imageKey","setImageKey","k","itemTitle","title","itemName","itemLink","affiliateUrl","itemUrl","children","initialOpen","label","help","value","disabled","onChange","val","style","backgroundColor","color","split","filter","Boolean","tokens","join","placeholder","shop","search","checked","price","desc","marginBottom","display","justifyContent","src","alt","onSelect","media","url","allowedTypes","render","open","onClick","variant","marginTop","isDestructive","margin","showAmazon","showRakuten","showYahoo","showMercari","showDmm","href","location","origin","target","className","icon","width","textAlign","padding","border","borderRadius","rel","decoding","height","shopName","itemPrice","Date","toLocaleDateString","length","kwArray","map","s","trim","kwForUrl","settings","MyAffiliateSettings","buttons","amazon","push","marginRight","textDecoration","rakuten","yahoo","mercari","dmm","cursor","affiliateRate","registerBlockType","metadata","name","edit"],"sourceRoot":""}