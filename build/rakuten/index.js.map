{"version":3,"file":"rakuten/index.js","mappings":"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M,uDAAA;YAAAyB,QAAA,GAAM,gBACD,EAAC8F,IAAI,CAACoF,aAAa,EAAC,GACzB;UAAA,CAAM,CACN;QAAA,CACG,CACL;MAAA,CACA;IACF,CACG,CAAC;EAAA,CACL,CAAC;AAEL;;;;;;;;;;;ACrvBA;;;;;;;;;;;;;;;;;ACAA;AACA;AACA;AACA;AACA;AACsD;;AAEtD;AACA;AACA;AACA;AACA;AACA;AACA;AACsB;;AAEtB;AACA;AACA;AAC0B;AACU;;AAEpC;AACA;AACA;AACA;AACA;AACAC,oEAAiB,CAACC,6CAAa,EAAE;EAChC;AACD;AACA;EACCE,IAAI,EAAEnE,6CAAIA;AACX,CAAC,CAAC;;;;;;;;;;;AChCF;;;;;;;;;;;ACAA;;;;;;;;;;ACAA;;;;;;;;;;ACAA;;;;;;;;;;ACAA;;;;;;;;;;ACAA;;;;;;;;;;ACAA;;;;;;;;;;ACAA;;;;;;;;;;ACAA;;;;;;UCAA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;UAEA;UACA;;;;;WCzBA;WACA;WACA;WACA;WACA,+BAA+B,wCAAwC;WACvE;WACA;WACA;WACA;WACA,iBAAiB,qBAAqB;WACtC;WACA;WACA,kBAAkB,qBAAqB;WACvC;WACA;WACA,KAAK;WACL;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;;;;;WC3BA;WACA;WACA;WACA;WACA;WACA,iCAAiC,WAAW;WAC5C;WACA;;;;;WCPA;WACA;WACA;WACA;WACA,yCAAyC,wCAAwC;WACjF;WACA;WACA;;;;;WCPA;;;;;WCAA;WACA;WACA;WACA,uDAAuD,iBAAiB;WACxE;WACA,gDAAgD,aAAa;WAC7D;;;;;WCNA;;WAEA;WACA;WACA;WACA;WACA;WACA;WACA;;WAEA;;WAEA;;WAEA;;WAEA;;WAEA;;WAEA;;WAEA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,MAAM,qBAAqB;WAC3B;WACA;WACA;WACA;WACA;WACA;WACA;WACA;;WAEA;WACA;WACA;;;;;UEjDA;UACA;UACA;UACA;UACA","sources":["webpack://product-link-maker/./src/rakuten/edit.js","webpack://product-link-maker/./src/rakuten/editor.scss","webpack://product-link-maker/./src/rakuten/index.js","webpack://product-link-maker/./src/rakuten/style.scss","webpack://product-link-maker/external window [\"wp\",\"apiFetch\"]","webpack://product-link-maker/external window [\"wp\",\"blockEditor\"]","webpack://product-link-maker/external window [\"wp\",\"blocks\"]","webpack://product-link-maker/external window [\"wp\",\"components\"]","webpack://product-link-maker/external window [\"wp\",\"data\"]","webpack://product-link-maker/external window [\"wp\",\"element\"]","webpack://product-link-maker/external window [\"wp\",\"i18n\"]","webpack://product-link-maker/external window \"ReactJSXRuntime\"","webpack://product-link-maker/webpack/bootstrap","webpack://product-link-maker/webpack/runtime/chunk loaded","webpack://product-link-maker/webpack/runtime/compat get default export","webpack://product-link-maker/webpack/runtime/define property getters","webpack://product-link-maker/webpack/runtime/hasOwnProperty shorthand","webpack://product-link-maker/webpack/runtime/make namespace object","webpack://product-link-maker/webpack/runtime/jsonp chunk loading","webpack://product-link-maker/webpack/before-startup","webpack://product-link-maker/webpack/startup","webpack://product-link-maker/webpack/after-startup"],"sourcesContent":["import { __ } from '@wordpress/i18n';\nimport { useBlockProps, MediaUpload, InspectorControls, MediaUploadCheck } from '@wordpress/block-editor';\nimport { PanelBody, TextControl, ToggleControl, TextareaControl, FormTokenField, Button, Flex, __experimentalHeading as Heading, ColorPicker, Card, CardHeader, CardBody, Icon, Spinner } from '@wordpress/components';\n\n// import './style.scss';\nimport './editor.scss';\n\nimport { useEffect, useState, useRef, useCallback } from '@wordpress/element';\nimport apiFetch from '@wordpress/api-fetch';\nimport { useSelect } from '@wordpress/data';\n\n/**\n * 定数定義\n */\nconst DEFAULT_BUTTON_COLOR = '#2196f3';\nconst DEBOUNCE_DELAY = 1000;\n\n/**\n * 共通スタイル定義\n */\nconst COMMON_STYLES = {\n\tbuttonBase: {\n\t\tcolor: '#fff',\n\t\tborderRadius: '3px',\n\t\tpadding: '8px 16px',\n\t\tdisplay: 'inline-flex',\n\t\talignItems: 'center',\n\t\tjustifyContent: 'center',\n\t\ttextDecoration: 'none',\n\t\tfontSize: '15px',\n\t\tfontWeight: '600',\n\t\twhiteSpace: 'nowrap',\n\t\tminWidth: '85px',\n\t\tboxShadow: '0 1px 3px rgba(0, 0, 0, 0.1)'\n\t},\n\tstatusBox: {\n\t\tpadding: '32px',\n\t\ttextAlign: 'center',\n\t\tborderRadius: '4px'\n\t}\n};\n\n/**\n * カスタムボタンコンポーネント（再利用可能）\n */\nfunction CustomButtonEditor({ buttons, onChange, label }) {\n\treturn (\n\t\t<>\n\t\t\t<p style={{ fontSize: '13px', color: '#757575', marginTop: 0 }}>\n\t\t\t\t{label}\n\t\t\t</p>\n\t\t\t{buttons.map((btn, index) => (\n\t\t\t\t<Card key={index} style={{ marginBottom: '16px', border: '1px solid #ddd' }}>\n\t\t\t\t\t<CardHeader>\n\t\t\t\t\t\t<Flex justify=\"space-between\" align=\"center\">\n\t\t\t\t\t\t\t<span style={{ fontWeight: 600 }}>ボタン {index + 1}</span>\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tisDestructive\n\t\t\t\t\t\t\t\tisSmall\n\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\tconst newButtons = [...buttons];\n\t\t\t\t\t\t\t\t\tnewButtons.splice(index, 1);\n\t\t\t\t\t\t\t\t\tonChange(newButtons);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\ticon=\"trash\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Flex>\n\t\t\t\t\t</CardHeader>\n\t\t\t\t\t<CardBody>\n\t\t\t\t\t\t<TextControl\n\t\t\t\t\t\t\tlabel=\"ボタンテキスト\"\n\t\t\t\t\t\t\tvalue={btn.text || ''}\n\t\t\t\t\t\t\tonChange={(val) => {\n\t\t\t\t\t\t\t\tconst newButtons = [...buttons];\n\t\t\t\t\t\t\t\tnewButtons[index] = { ...newButtons[index], text: val };\n\t\t\t\t\t\t\t\tonChange(newButtons);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tplaceholder=\"例: 公式サイト\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<TextControl\n\t\t\t\t\t\t\tlabel=\"リンクURL\"\n\t\t\t\t\t\t\tvalue={btn.url || ''}\n\t\t\t\t\t\t\tonChange={(val) => {\n\t\t\t\t\t\t\t\tconst newButtons = [...buttons];\n\t\t\t\t\t\t\t\tnewButtons[index] = { ...newButtons[index], url: val };\n\t\t\t\t\t\t\t\tonChange(newButtons);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tplaceholder=\"https://example.com\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\t\tlabel=\"別タブで開く\"\n\t\t\t\t\t\t\tchecked={btn.openInNewTab !== false}\n\t\t\t\t\t\t\tonChange={(val) => {\n\t\t\t\t\t\t\t\tconst newButtons = [...buttons];\n\t\t\t\t\t\t\t\tnewButtons[index] = { ...newButtons[index], openInNewTab: val };\n\t\t\t\t\t\t\t\tonChange(newButtons);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<div style={{ marginTop: '12px' }}>\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tvariant=\"secondary\"\n\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\tconst newButtons = [...buttons];\n\t\t\t\t\t\t\t\t\tnewButtons[index] = {\n\t\t\t\t\t\t\t\t\t\t...newButtons[index],\n\t\t\t\t\t\t\t\t\t\tshowColorPicker: !newButtons[index].showColorPicker\n\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\tonChange(newButtons);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tstyle={{ width: '100%', marginBottom: '8px' }}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{btn.showColorPicker ? '色を選択中' : 'ボタンの色を選択'}\n\t\t\t\t\t\t\t\t<span style={{\n\t\t\t\t\t\t\t\t\tmarginLeft: '8px',\n\t\t\t\t\t\t\t\t\twidth: '20px',\n\t\t\t\t\t\t\t\t\theight: '20px',\n\t\t\t\t\t\t\t\t\tbackgroundColor: btn.color || DEFAULT_BUTTON_COLOR,\n\t\t\t\t\t\t\t\t\tdisplay: 'inline-block',\n\t\t\t\t\t\t\t\t\tborderRadius: '3px',\n\t\t\t\t\t\t\t\t\tborder: '1px solid #ddd',\n\t\t\t\t\t\t\t\t\tverticalAlign: 'middle'\n\t\t\t\t\t\t\t\t}} />\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t{btn.showColorPicker && (\n\t\t\t\t\t\t\t\t<ColorPicker\n\t\t\t\t\t\t\t\t\tcolor={btn.color || DEFAULT_BUTTON_COLOR}\n\t\t\t\t\t\t\t\t\tonChange={(val) => {\n\t\t\t\t\t\t\t\t\t\tconst newButtons = [...buttons];\n\t\t\t\t\t\t\t\t\t\tnewButtons[index] = { ...newButtons[index], color: val };\n\t\t\t\t\t\t\t\t\t\tonChange(newButtons);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tenableAlpha\n\t\t\t\t\t\t\t\t\tdefaultValue={DEFAULT_BUTTON_COLOR}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</CardBody>\n\t\t\t\t</Card>\n\t\t\t))}\n\t\t\t<Button\n\t\t\t\tvariant=\"secondary\"\n\t\t\t\tonClick={() => {\n\t\t\t\t\tconst newButtons = [...buttons, {\n\t\t\t\t\t\ttext: '',\n\t\t\t\t\t\turl: '',\n\t\t\t\t\t\topenInNewTab: true,\n\t\t\t\t\t\tcolor: DEFAULT_BUTTON_COLOR\n\t\t\t\t\t}];\n\t\t\t\t\tonChange(newButtons);\n\t\t\t\t}}\n\t\t\t\ticon=\"plus\"\n\t\t\t\tstyle={{ width: '100%', justifyContent: 'center' }}\n\t\t\t>\n\t\t\t\tボタンを追加\n\t\t\t</Button>\n\t\t</>\n\t);\n}\n\n/**\n * ショップボタンのスタイル定義\n */\nconst BUTTON_STYLES = {\n\tamazon: { backgroundColor: '#ff9900', text: 'Amazon' },\n\trakuten: { backgroundColor: '#bf0000', text: '楽天市場' },\n\tyahoo: { backgroundColor: '#ff0033', text: 'Yahoo!ショッピング' },\n\tmercari: { backgroundColor: '#4dc9ff', text: 'メルカリ' },\n\tdmm: { backgroundColor: '#00bcd4', text: 'DMM' }\n};\n\n/**\n * カスタムボタンレンダリング\n */\nfunction renderCustomButton(btn, keyPrefix, idx) {\n\tif (!btn.text || !btn.url) return null;\n\n\treturn (\n\t\t<div className=\"plm-shop-custom\" key={`${keyPrefix}-${idx}`}>\n\t\t\t<a\n\t\t\t\trel=\"nofollow noopener\"\n\t\t\t\thref={btn.url}\n\t\t\t\ttarget={btn.openInNewTab !== false ? \"_blank\" : \"_self\"}\n\t\t\t\tstyle={{\n\t\t\t\t\t...COMMON_STYLES.buttonBase,\n\t\t\t\t\tbackgroundColor: btn.color || DEFAULT_BUTTON_COLOR\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t{btn.text}\n\t\t\t</a>\n\t\t</div>\n\t);\n}\n\n/**\n * ショップボタンレンダリング\n */\nfunction renderShopButton(shopKey, url, style) {\n\treturn (\n\t\t<div className={`plm-shop-${shopKey}`} key={shopKey}>\n\t\t\t<a\n\t\t\t\trel=\"nofollow noopener\"\n\t\t\t\thref={url}\n\t\t\t\ttarget=\"_blank\"\n\t\t\t\tstyle={{\n\t\t\t\t\t...COMMON_STYLES.buttonBase,\n\t\t\t\t\tbackgroundColor: style.backgroundColor\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t{style.text}\n\t\t\t</a>\n\t\t</div>\n\t);\n}\n\n/**\n * ステータスメッセージコンポーネント\n */\nfunction StatusMessage({ type, message }) {\n\tconst styles = {\n\t\tloading: {\n\t\t\t...COMMON_STYLES.statusBox,\n\t\t\tcolor: '#888',\n\t\t\tbackgroundColor: '#f5f5f5',\n\t\t\tborder: '1px dashed #ccc',\n\t\t\tdisplay: 'flex',\n\t\t\talignItems: 'center',\n\t\t\tgap: '8px'\n\t\t},\n\t\terror: {\n\t\t\t...COMMON_STYLES.statusBox,\n\t\t\tcolor: '#d63638',\n\t\t\tbackgroundColor: '#fff0f0',\n\t\t\tborder: '1px solid #d63638'\n\t\t},\n\t\tempty: {\n\t\t\t...COMMON_STYLES.statusBox,\n\t\t\tcolor: '#666',\n\t\t\tbackgroundColor: '#f5f5f5',\n\t\t\tborder: '1px dashed #ccc'\n\t\t}\n\t};\n\n\treturn (\n\t\t<div style={styles[type]}>\n\t\t\t{type === 'loading' && <Spinner />}\n\t\t\t{message}\n\t\t</div>\n\t);\n}\n\n/**\n * 全ボタンをレンダリングする関数\n */\nfunction renderAllButtons(attributes) {\n\tconst kwArray = attributes.kw.split(',').map(s => s.trim()).filter(Boolean);\n\tconst kwForUrl = kwArray.join(' ');\n\tconst settings = window.ProductLinkMakerSettings || {};\n\tconst buttons = [];\n\n\t// カスタムボタン（前）\n\t(attributes.customButtonsBefore || []).forEach((btn, idx) => {\n\t\tconst customBtn = renderCustomButton(btn, 'custom-before', idx);\n\t\tif (customBtn) buttons.push(customBtn);\n\t});\n\n\t// ショップボタン\n\tif (settings.amazon && attributes.showAmazon !== false) {\n\t\tconst amazonUrl = `https://www.amazon.co.jp/gp/search?keywords=${encodeURIComponent(kwForUrl)}${settings.amazonTrackingId ? '&tag=' + settings.amazonTrackingId : ''}`;\n\t\tbuttons.push(renderShopButton('amazon', amazonUrl, BUTTON_STYLES.amazon));\n\t}\n\tif (settings.rakuten && attributes.showRakuten !== false) {\n\t\tconst rakutenSearchUrl = encodeURIComponent('https://search.rakuten.co.jp/search/mall/' + kwForUrl + '/');\n\t\tconst rakutenUrl = `https://hb.afl.rakuten.co.jp/hgc/${settings.rakutenAffiliateId || ''}/?pc=${rakutenSearchUrl}&m=${rakutenSearchUrl}`;\n\t\tbuttons.push(renderShopButton('rakuten', rakutenUrl, BUTTON_STYLES.rakuten));\n\t}\n\tif (settings.yahoo && attributes.showYahoo !== false) {\n\t\tconst yahooSearchUrl = encodeURIComponent('https://search.shopping.yahoo.co.jp/search?p=' + kwForUrl);\n\t\tconst yahooUrl = `https://ck.jp.ap.valuecommerce.com/servlet/referral?sid=${settings.yahooSid || ''}&pid=${settings.yahooPid || ''}&vc_url=${yahooSearchUrl}`;\n\t\tbuttons.push(renderShopButton('yahoo', yahooUrl, BUTTON_STYLES.yahoo));\n\t}\n\tif (settings.mercari && attributes.showMercari !== false) {\n\t\tconst mercariUrl = `https://jp.mercari.com/search?afid=${settings.mercariId || ''}&keyword=${encodeURIComponent(kwForUrl)}`;\n\t\tbuttons.push(renderShopButton('mercari', mercariUrl, BUTTON_STYLES.mercari));\n\t}\n\tif (settings.dmm && attributes.showDmm !== false) {\n\t\t// DMM: キーワード設定を使用（render.phpと同じ形式）\n\t\tconst dmmUrl = `https://al.dmm.com/?lurl=https%3A%2F%2Fwww.dmm.com%2Fsearch%2F%3D%2Fsearchstr%3D${encodeURIComponent(kwForUrl)}%2Fanalyze%3DV1ECCVYAUQQ_%2Flimit%3D30%2Fsort%3Drankprofile%2F&af_id=${settings.dmmId || ''}&ch=link_tool&ch_id=link`;\n\t\tbuttons.push(renderShopButton('dmm', dmmUrl, BUTTON_STYLES.dmm));\n\t}\n\n\t// カスタムボタン（後）\n\t(attributes.customButtonsAfter || []).forEach((btn, idx) => {\n\t\tconst customBtn = renderCustomButton(btn, 'custom-after', idx);\n\t\tif (customBtn) buttons.push(customBtn);\n\t});\n\n\treturn buttons;\n}\n\n/**\n * プレビューコンポーネント\n */\nfunction ProductPreview({ attributes, item, imageUrl, imageKey, itemTitle, itemLink }) {\n\tconst showImage = attributes.showImage !== false;\n\treturn (\n\t\t<div className={`plm-product-box${!showImage ? ' plm-product-box--no-image' : ''}`}>\n\t\t\t{showImage && (\n\t\t\t\t<figure className=\"plm-product-thumb\">\n\t\t\t\t\t<a rel=\"nofollow noopener\"\n\t\t\t\t\t\thref={itemLink}\n\t\t\t\t\t\tclassName=\"plm-product-thumb-link\"\n\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\ttitle={itemTitle}\n\t\t\t\t\t>\n\t\t\t\t\t\t{imageUrl && (\n\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\tkey={imageKey}\n\t\t\t\t\t\t\t\tdecoding=\"async\"\n\t\t\t\t\t\t\t\tsrc={imageUrl}\n\t\t\t\t\t\t\t\talt={itemTitle || '商品画像'}\n\t\t\t\t\t\t\t\twidth=\"128\"\n\t\t\t\t\t\t\t\theight=\"128\"\n\t\t\t\t\t\t\t\tclassName=\"plm-product-thumb-image\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</a>\n\t\t\t\t</figure>\n\t\t\t)}\n\t\t\t<div className=\"plm-product-content\">\n\t\t\t\t<div className=\"plm-product-title\">\n\t\t\t\t\t<a rel=\"nofollow noopener\"\n\t\t\t\t\t\thref={itemLink}\n\t\t\t\t\t\tclassName=\"plm-product-title-link\"\n\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\ttitle={itemTitle}\n\t\t\t\t\t>\n\t\t\t\t\t\t{itemTitle ? itemTitle : ''}\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"plm-product-snippet\">\n\t\t\t\t\t{attributes.showShop !== false && (item?.shopName || attributes.shop) && (\n\t\t\t\t\t\t<div className=\"plm-product-maker\">\n\t\t\t\t\t\t\t{item?.shopName || attributes.shop}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t\t{attributes.price && (\n\t\t\t\t\t\t<div className=\"plm-product-price\">\n\t\t\t\t\t\t\t<span className=\"plm-price-value\">\n\t\t\t\t\t\t\t\t{item?.itemPrice ? `￥ ${Number(item.itemPrice).toLocaleString('ja-JP')}` : '価格情報なし'}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<span className=\"acquired-date\">\n\t\t\t\t\t\t\t\t{item?.itemPrice ? `（${new Date().toLocaleDateString()} 時点）` : ''}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t\t{attributes.desc && (\n\t\t\t\t\t\t<div className=\"plm-product-description\">{attributes.desc}</div>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t\t<div className=\"plm-product-buttons\">\n\t\t\t\t\t{attributes.kw && attributes.kw.split(',').filter(Boolean).length > 0 && renderAllButtons(attributes)}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport default function Edit({ attributes, setAttributes }) {\n\tconst [item, setItem] = useState(null);\n\tconst [isLoading, setIsLoading] = useState(true); // 初期状態をtrueに変更\n\tconst [error, setError] = useState(null);\n\tconst [isClearingCache, setIsClearingCache] = useState(false);\n\tconst [hasInitialized, setHasInitialized] = useState(false); // 初回取得完了フラグ\n\tconst fetchTimeoutRef = useRef(null);\n\tconst isInitialLoadRef = useRef(true); // 初回ロードを追跡するRef\n\n\t// 現在の投稿IDを取得\n\tconst postId = useSelect((select) => {\n\t\tconst editor = select('core/editor');\n\t\treturn editor ? editor.getCurrentPostId() : null;\n\t}, []);\n\n\tconst fetchData = useCallback(async () => {\n\t\tif (!attributes.id && !attributes.no && !attributes.kw) {\n\t\t\tsetItem(null);\n\t\t\tsetAttributes(prev => ({ ...prev, imageUrl: '' }));\n\t\t\tsetIsLoading(false);\n\t\t\tsetHasInitialized(true);\n\t\t\treturn;\n\t\t}\n\t\tsetIsLoading(true);\n\t\tsetError(null);\n\t\ttry {\n\t\t\t// キャッシュ削除は行わず、常にキャッシュを利用する\n\t\t\tconst queryParams = new URLSearchParams({\n\t\t\t\tid: attributes.id || '',\n\t\t\t\tkw: attributes.kw || '',\n\t\t\t\tno: attributes.no || '',\n\t\t\t\tpost_id: postId || ''\n\t\t\t});\n\t\t\tconst data = await apiFetch({\n\t\t\t\tpath: `/product-link-maker/v1/rakuten/?${queryParams.toString()}`\n\t\t\t});\n\n\t\t\tif (data && data.Items && data.Items.length > 0 && data.Items[0]?.Item) {\n\t\t\t\t// 正常にデータを取得できた場合\n\t\t\t\tsetItem(data.Items[0].Item);\n\t\t\t\tsetAttributes(prev => ({\n\t\t\t\t\t...prev,\n\t\t\t\t\timageUrl: data.Items[0].Item?.mediumImageUrls?.[0]?.imageUrl || ''\n\t\t\t\t}));\n\t\t\t} else if (data?.error) {\n\t\t\t\t// APIエラーレスポンス\n\t\t\t\tsetItem(null);\n\t\t\t\tsetAttributes(prev => ({ ...prev, imageUrl: '' }));\n\t\t\t\tsetError(data.error_description || 'APIエラーが発生しました。しばらく待ってから再度お試しください。');\n\n\t\t\t\t// エラーログに記録（初回データ取得完了後のみ、rate_limit以外）\n\t\t\t\tif (hasInitialized && data.error !== 'rate_limit' && (attributes.id || attributes.kw || attributes.no)) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tawait apiFetch({\n\t\t\t\t\t\t\tpath: '/product-link-maker/v1/log-client-error/',\n\t\t\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\terror_type: data.error,\n\t\t\t\t\t\t\t\terror_message: data.error_description || data.error,\n\t\t\t\t\t\t\t\tpost_id: postId,\n\t\t\t\t\t\t\t\titem_id: attributes.id || '',\n\t\t\t\t\t\t\t\tkeyword: attributes.kw || attributes.no || '',\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t} catch (logError) {\n\t\t\t\t\t\t// エラーログの記録に失敗しても処理は継続\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// データなし（商品が見つからない等）\n\t\t\t\tsetItem(null);\n\t\t\t\tsetAttributes(prev => ({ ...prev, imageUrl: '' }));\n\t\t\t\tsetError('データが取得できませんでした');\n\n\t\t\t\t// 初回データ取得完了後のみエラーログに記録（商品削除の検知）\n\t\t\t\tif (hasInitialized && (attributes.id || attributes.kw || attributes.no)) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tawait apiFetch({\n\t\t\t\t\t\t\tpath: '/product-link-maker/v1/log-client-error/',\n\t\t\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\terror_type: 'product_not_found',\n\t\t\t\t\t\t\t\terror_message: '商品が見つかりませんでした。商品が削除されたか、IDが正しくない可能性があります。',\n\t\t\t\t\t\t\t\tpost_id: postId,\n\t\t\t\t\t\t\t\titem_id: attributes.id || '',\n\t\t\t\t\t\t\t\tkeyword: attributes.kw || attributes.no || '',\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t} catch (logError) {\n\t\t\t\t\t\t// エラーログの記録に失敗しても処理は継続\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tconsole.error('Rakuten API fetch error:', error);\n\t\t\tsetItem(null);\n\t\t\tsetAttributes(prev => ({ ...prev, imageUrl: '' }));\n\n\t\t\t// より詳細なエラーメッセージを表示\n\t\t\tlet errorMessage = 'APIエラーが発生しました。';\n\t\t\tif (error.message) {\n\t\t\t\terrorMessage += ' ' + error.message;\n\t\t\t}\n\t\t\tif (error.data?.message) {\n\t\t\t\terrorMessage += ' ' + error.data.message;\n\t\t\t}\n\t\t\tsetError(errorMessage);\n\n\t\t\t// 例外もエラーログに記録（初回データ取得完了後のみ）\n\t\t\tif (hasInitialized && (attributes.id || attributes.kw || attributes.no)) {\n\t\t\t\ttry {\n\t\t\t\t\tawait apiFetch({\n\t\t\t\t\t\tpath: '/product-link-maker/v1/log-client-error/',\n\t\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\terror_type: 'fetch_exception',\n\t\t\t\t\t\t\terror_message: 'API取得中に例外が発生: ' + (error.message || error.toString()),\n\t\t\t\t\t\t\tpost_id: postId,\n\t\t\t\t\t\t\titem_id: attributes.id || '',\n\t\t\t\t\t\t\tkeyword: attributes.kw || attributes.no || '',\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t} catch (logError) {\n\t\t\t\t\t// エラーログの記録に失敗しても処理は継続\n\t\t\t\t}\n\t\t\t}\n\t\t} finally {\n\t\t\tsetIsLoading(false);\n\t\t\tsetHasInitialized(true);\n\t\t\t// 初回ロード完了後、フラグを更新\n\t\t\tif (isInitialLoadRef.current) {\n\t\t\t\tisInitialLoadRef.current = false;\n\t\t\t}\n\t\t}\n\t}, [attributes.id, attributes.no, attributes.kw, postId, setAttributes]);\n\n\t// キャッシュを削除して再取得する関数\n\tconst handleClearCache = useCallback(async () => {\n\t\tif (!window.confirm('キャッシュを削除して最新データを取得しますか？')) {\n\t\t\treturn;\n\t\t}\n\t\tsetIsClearingCache(true);\n\t\ttry {\n\t\t\tawait apiFetch({\n\t\t\t\tpath: '/product-link-maker/v1/rakuten-cache/',\n\t\t\t\tmethod: 'POST',\n\t\t\t\tdata: {\n\t\t\t\t\tid: attributes.id,\n\t\t\t\t\tkw: attributes.kw,\n\t\t\t\t\tno: attributes.no,\n\t\t\t\t},\n\t\t\t});\n\t\t\t// キャッシュ削除後、再取得\n\t\t\tawait fetchData();\n\t\t} catch (error) {\n\t\t\tconsole.error('Cache clear error:', error);\n\t\t\talert('キャッシュ削除中にエラーが発生しました。');\n\t\t} finally {\n\t\t\tsetIsClearingCache(false);\n\t\t}\n\t}, [attributes.id, attributes.kw, attributes.no, fetchData]);\n\n\t// attributesがあれば必ずfetchDataを呼ぶ（デバウンス付き）\n\tuseEffect(() => {\n\t\t// 前回のタイマーをクリア\n\t\tif (fetchTimeoutRef.current) {\n\t\t\tclearTimeout(fetchTimeoutRef.current);\n\t\t}\n\n\t\tif (attributes.id || attributes.no || attributes.kw) {\n\t\t\t// デバウンスを追加\n\t\t\tfetchTimeoutRef.current = setTimeout(() => {\n\t\t\t\tfetchData();\n\t\t\t}, DEBOUNCE_DELAY);\n\t\t} else {\n\t\t\tsetItem(null);\n\t\t\tsetIsLoading(false);\n\t\t\tsetHasInitialized(true);\n\t\t}\n\n\t\t// クリーンアップ\n\t\treturn () => {\n\t\t\tif (fetchTimeoutRef.current) {\n\t\t\t\tclearTimeout(fetchTimeoutRef.current);\n\t\t\t}\n\t\t};\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, [attributes.id, attributes.no, attributes.kw]);\n\n\t// 画像・リンク・タイトル等をAPIデータ優先で差し替え\n\tconst [imageKey, setImageKey] = useState(0);\n\tconst imageUrl = attributes.imageUrl || (item && item.mediumImageUrls && item.mediumImageUrls[0] ? item.mediumImageUrls[0].imageUrl : '');\n\tuseEffect(() => {\n\t\tsetImageKey(k => k + 1);\n\t}, [imageUrl]);\n\tconst itemTitle = attributes.title || (item ? item.itemName : '');\n\tconst itemLink = item ? (item.affiliateUrl || item.itemUrl || '#') : '#';\n\n\treturn (\n\t\t<>\n\t\t\t<InspectorControls>\n\t\t\t\t<PanelBody title={__('商品情報設定', 'product-link-maker')} initialOpen={true}>\n\t\t\t\t\t<TextControl\n\t\t\t\t\t\tlabel={__('アイテムコード（ID）', 'product-link-maker')}\n\t\t\t\t\t\thelp={attributes.no ? __('商品番号が入力されている場合は入力できません', 'product-link-maker') : ''}\n\t\t\t\t\t\tvalue={attributes.id}\n\t\t\t\t\t\tdisabled={!!attributes.no}\n\t\t\t\t\t\tonChange={(val) => {\n\t\t\t\t\t\t\tsetAttributes({ id: val, no: '' }); // 入力時にnoをクリア\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tplaceholder=\"book:11830886\"\n\t\t\t\t\t\tstyle={attributes.no ? { backgroundColor: '#f5f5f5', color: '#aaa' } : {}}\n\t\t\t\t\t/>\n\t\t\t\t\t<TextControl\n\t\t\t\t\t\tlabel={__('商品番号', 'product-link-maker')}\n\t\t\t\t\t\thelp={attributes.id ? __('アイテムコード（ID）が入力されている場合は入力できません', 'product-link-maker') : ''}\n\t\t\t\t\t\tvalue={attributes.no}\n\t\t\t\t\t\tdisabled={!!attributes.id}\n\t\t\t\t\t\tonChange={(val) => {\n\t\t\t\t\t\t\tsetAttributes({ no: val, id: '' }); // 入力時にidをクリア\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tplaceholder=\"4902102072625\"\n\t\t\t\t\t\tstyle={attributes.id ? { backgroundColor: '#f5f5f5', color: '#aaa' } : {}}\n\t\t\t\t\t/>\n\t\t\t\t\t<FormTokenField\n\t\t\t\t\t\tlabel={__('商品検索キーワード', 'product-link-maker')}\n\t\t\t\t\t\tvalue={attributes.kw ? attributes.kw.split(',').filter(Boolean) : []}\n\t\t\t\t\t\tonChange={(tokens) => setAttributes({ kw: tokens.join(',') })}\n\t\t\t\t\t\tplaceholder={__('キーワードを入力してEnter', 'product-link-maker')}\n\t\t\t\t\t/>\n\t\t\t\t\t<TextControl\n\t\t\t\t\t\tlabel={__('商品タイトル', 'product-link-maker')}\n\t\t\t\t\t\tvalue={attributes.title}\n\t\t\t\t\t\tonChange={(val) => setAttributes({ title: val })}\n\t\t\t\t\t/>\n\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\tlabel={__('店名表示', 'product-link-maker')}\n\t\t\t\t\t\tchecked={attributes.showShop !== false}\n\t\t\t\t\t\tonChange={(val) => setAttributes({ showShop: val })}\n\t\t\t\t\t/>\n\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\tlabel={__('価格表示', 'product-link-maker')}\n\t\t\t\t\t\tchecked={attributes.price}\n\t\t\t\t\t\tonChange={(val) => setAttributes({ price: val })}\n\t\t\t\t\t/>\n\t\t\t\t\t<TextareaControl\n\t\t\t\t\t\tlabel={__('説明文', 'product-link-maker')}\n\t\t\t\t\t\tvalue={attributes.desc}\n\t\t\t\t\t\tonChange={(val) => setAttributes({ desc: val })}\n\t\t\t\t\t/>\n\t\t\t\t\t<div style={{ margin: '24px 0 0 0' }} />\n\t\t\t\t\t<Heading>ボタン表示設定</Heading>\n\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\tlabel={__('Amazonボタンを表示', 'product-link-maker')}\n\t\t\t\t\t\tchecked={attributes.showAmazon !== false}\n\t\t\t\t\t\tonChange={val => setAttributes({ showAmazon: val })}\n\t\t\t\t\t/>\n\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\tlabel={__('楽天ボタンを表示', 'product-link-maker')}\n\t\t\t\t\t\tchecked={attributes.showRakuten !== false}\n\t\t\t\t\t\tonChange={val => setAttributes({ showRakuten: val })}\n\t\t\t\t\t/>\n\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\tlabel={__('Yahoo!ボタンを表示', 'product-link-maker')}\n\t\t\t\t\t\tchecked={attributes.showYahoo !== false}\n\t\t\t\t\t\tonChange={val => setAttributes({ showYahoo: val })}\n\t\t\t\t\t/>\n\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\tlabel={__('メルカリボタンを表示', 'product-link-maker')}\n\t\t\t\t\t\tchecked={attributes.showMercari !== false}\n\t\t\t\t\t\tonChange={val => setAttributes({ showMercari: val })}\n\t\t\t\t\t/>\n\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\tlabel={__('DMMボタンを表示', 'product-link-maker')}\n\t\t\t\t\t\tchecked={attributes.showDmm !== false}\n\t\t\t\t\t\tonChange={val => setAttributes({ showDmm: val })}\n\t\t\t\t\t/>\n\n\t\t\t\t</PanelBody>\n\t\t\t\t<PanelBody title={__('カスタムボタン（前）', 'product-link-maker')} initialOpen={true}>\n\t\t\t\t\t<CustomButtonEditor\n\t\t\t\t\t\tbuttons={attributes.customButtonsBefore || []}\n\t\t\t\t\t\tonChange={(newButtons) => setAttributes({ customButtonsBefore: newButtons })}\n\t\t\t\t\t\tlabel=\"既存のボタンの前に表示されるカスタムボタンを追加できます\"\n\t\t\t\t\t/>\n\t\t\t\t</PanelBody>\n\t\t\t\t<PanelBody title={__('カスタムボタン（後）', 'product-link-maker')} initialOpen={true}>\n\t\t\t\t\t<CustomButtonEditor\n\t\t\t\t\t\tbuttons={attributes.customButtonsAfter || []}\n\t\t\t\t\t\tonChange={(newButtons) => setAttributes({ customButtonsAfter: newButtons })}\n\t\t\t\t\t\tlabel=\"既存のボタンの後に表示されるカスタムボタンを追加できます\"\n\t\t\t\t\t/>\n\t\t\t\t</PanelBody>\n\t\t\t\t<PanelBody title={__('商品画像設定', 'product-link-maker')} initialOpen={true}>\n\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\tlabel={__('商品画像を表示', 'product-link-maker')}\n\t\t\t\t\t\tchecked={attributes.showImage !== false}\n\t\t\t\t\t\tonChange={(val) => setAttributes({ showImage: val })}\n\t\t\t\t\t/>\n\t\t\t\t\t{attributes.showImage !== false && (\n\t\t\t\t\t\t<MediaUploadCheck>\n\t\t\t\t\t\t\t<div style={{ marginBottom: '0', marginTop: '16px' }}>\n\t\t\t\t\t\t\t\t{(attributes.imageUrl !== '' ? attributes.imageUrl : item?.mediumImageUrls?.[0]?.imageUrl) && (\n\t\t\t\t\t\t\t\t\t<div style={{ marginBottom: '10px', display: 'flex', justifyContent: 'center', backgroundColor: '#eee' }}>\n\t\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\t\tsrc={attributes.imageUrl !== '' ? attributes.imageUrl : item?.mediumImageUrls?.[0]?.imageUrl}\n\t\t\t\t\t\t\t\t\t\t\talt=\"\"\n\t\t\t\t\t\t\t\t\t\t\tstyle={{ display: 'block' }}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t<MediaUpload\n\t\t\t\t\t\t\t\t\tonSelect={(media) => setAttributes({ imageUrl: media.url || '' })}\n\t\t\t\t\t\t\t\t\tallowedTypes={['image']}\n\t\t\t\t\t\t\t\t\trender={({ open }) => (\n\t\t\t\t\t\t\t\t\t\t<Flex>\n\t\t\t\t\t\t\t\t\t\t\t<Button onClick={open} variant=\"secondary\">\n\t\t\t\t\t\t\t\t\t\t\t\t画像を選択\n\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t\t{attributes.imageUrl && (\n\t\t\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{ marginTop: 4 }}\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => setAttributes({ imageUrl: '' })}\n\t\t\t\t\t\t\t\t\t\t\t\t\tisDestructive\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{__('画像をリセット', 'product-link-maker')}\n\t\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t</Flex>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</MediaUploadCheck>\n\t\t\t\t\t)}\n\t\t\t\t</PanelBody>\n\t\t\t\t<PanelBody title={__('アフィリエイト設定', 'product-link-maker')} initialOpen={false}>\n\t\t\t\t\t<Button\n\t\t\t\t\t\thref={`${window.location.origin}/wp-admin/options-general.php?page=product-link-maker`}\n\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\tclassName=\"\"\n\t\t\t\t\t\tvariant=\"primary\"\n\t\t\t\t\t\ticon=\"admin-generic\"\n\t\t\t\t\t\tstyle={{ marginTop: '5px', width: '100%', textAlign: 'center' }}\n\t\t\t\t\t>\n\t\t\t\t\t\t{__('アフィリエイト設定', 'product-link-maker')}\n\t\t\t\t\t</Button>\n\t\t\t\t</PanelBody>\n\t\t\t</InspectorControls>\n\t\t\t<div {...useBlockProps()}>\n\t\t\t\t{isLoading ? (\n\t\t\t\t\t<StatusMessage type=\"loading\" message=\"Loading...\" />\n\t\t\t\t) : error ? (\n\t\t\t\t\t<StatusMessage type=\"error\" message={error} />\n\t\t\t\t) : !attributes.id && !attributes.no && !attributes.kw ? (\n\t\t\t\t\t<StatusMessage type=\"empty\" message=\"商品情報を設定してください\" />\n\t\t\t\t) : !hasInitialized || (!item && (attributes.id || attributes.no)) ? (\n\t\t\t\t\t<StatusMessage type=\"loading\" message=\"Loading...\" />\n\t\t\t\t) : (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<ProductPreview\n\t\t\t\t\t\t\tattributes={attributes}\n\t\t\t\t\t\t\titem={item}\n\t\t\t\t\t\t\timageUrl={imageUrl}\n\t\t\t\t\t\t\timageKey={imageKey}\n\t\t\t\t\t\t\titemTitle={itemTitle}\n\t\t\t\t\t\t\titemLink={itemLink}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t{item && (\n\t\t\t\t\t\t\t<div className=\"plm-admin-info\">\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\tvariant=\"secondary\"\n\t\t\t\t\t\t\t\t\tonClick={handleClearCache}\n\t\t\t\t\t\t\t\t\tdisabled={isClearingCache}\n\t\t\t\t\t\t\t\t\tisBusy={isClearingCache}\n\t\t\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{isClearingCache ? '削除中...' : 'キャッシュ更新'}\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t{item?.affiliateRate && (\n\t\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t\t料率: {item.affiliateRate}%\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t</>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport {};","/**\n * Registers a new block provided a unique name and an object defining its behavior.\n *\n * @see https://developer.wordpress.org/block-editor/reference-guides/block-api/block-registration/\n */\nimport { registerBlockType } from '@wordpress/blocks';\n\n/**\n * Lets webpack process CSS, SASS or SCSS files referenced in JavaScript files.\n * All files containing `style` keyword are bundled together. The code used\n * gets applied both to the front of your site and to the editor.\n *\n * @see https://www.npmjs.com/package/@wordpress/scripts#using-css\n */\nimport './style.scss';\n\n/**\n * Internal dependencies\n */\nimport Edit from './edit';\nimport metadata from './block.json';\n\n/**\n * Every block starts by registering a new block type definition.\n *\n * @see https://developer.wordpress.org/block-editor/reference-guides/block-api/block-registration/\n */\nregisterBlockType(metadata.name, {\n\t/**\n\t * @see ./edit.js\n\t */\n\tedit: Edit,\n});\n","// extracted by mini-css-extract-plugin\nexport {};","module.exports = window[\"wp\"][\"apiFetch\"];","module.exports = window[\"wp\"][\"blockEditor\"];","module.exports = window[\"wp\"][\"blocks\"];","module.exports = window[\"wp\"][\"components\"];","module.exports = window[\"wp\"][\"data\"];","module.exports = window[\"wp\"][\"element\"];","module.exports = window[\"wp\"][\"i18n\"];","module.exports = window[\"ReactJSXRuntime\"];","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t\"rakuten/index\": 0,\n\t\"rakuten/style-index\": 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = globalThis[\"webpackChunkproduct_link_maker\"] = globalThis[\"webpackChunkproduct_link_maker\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [\"rakuten/style-index\"], () => (__webpack_require__(\"./src/rakuten/index.js\")))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n",""],"names":["__","useBlockProps","MediaUpload","InspectorControls","MediaUploadCheck","PanelBody","TextControl","ToggleControl","TextareaControl","FormTokenField","Button","Flex","__experimentalHeading","Heading","ColorPicker","Card","CardHeader","CardBody","Icon","Spinner","useEffect","useState","useRef","useCallback","apiFetch","useSelect","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","DEFAULT_BUTTON_COLOR","DEBOUNCE_DELAY","COMMON_STYLES","buttonBase","color","borderRadius","padding","display","alignItems","justifyContent","textDecoration","fontSize","fontWeight","whiteSpace","minWidth","boxShadow","statusBox","textAlign","CustomButtonEditor","buttons","onChange","label","children","style","marginTop","map","btn","index","marginBottom","border","justify","align","isDestructive","isSmall","onClick","newButtons","splice","icon","value","text","val","placeholder","url","checked","openInNewTab","variant","showColorPicker","width","marginLeft","height","backgroundColor","verticalAlign","enableAlpha","defaultValue","BUTTON_STYLES","amazon","rakuten","yahoo","mercari","dmm","renderCustomButton","keyPrefix","idx","className","rel","href","target","renderShopButton","shopKey","StatusMessage","type","message","styles","loading","gap","error","empty","renderAllButtons","attributes","kwArray","kw","split","s","trim","filter","Boolean","kwForUrl","join","settings","window","ProductLinkMakerSettings","customButtonsBefore","forEach","customBtn","push","showAmazon","amazonUrl","encodeURIComponent","amazonTrackingId","showRakuten","rakutenSearchUrl","rakutenUrl","rakutenAffiliateId","showYahoo","yahooSearchUrl","yahooUrl","yahooSid","yahooPid","showMercari","mercariUrl","mercariId","showDmm","dmmUrl","dmmId","customButtonsAfter","ProductPreview","item","imageUrl","imageKey","itemTitle","itemLink","showImage","title","decoding","src","alt","showShop","shopName","shop","price","itemPrice","Number","toLocaleString","Date","toLocaleDateString","desc","length","Edit","setAttributes","setItem","isLoading","setIsLoading","setError","isClearingCache","setIsClearingCache","hasInitialized","setHasInitialized","fetchTimeoutRef","isInitialLoadRef","postId","select","editor","getCurrentPostId","fetchData","id","no","prev","queryParams","URLSearchParams","post_id","data","path","toString","Items","Item","mediumImageUrls","error_description","method","error_type","error_message","item_id","keyword","logError","console","errorMessage","current","handleClearCache","confirm","alert","clearTimeout","setTimeout","setImageKey","k","itemName","affiliateUrl","itemUrl","initialOpen","help","disabled","tokens","margin","onSelect","media","allowedTypes","render","open","location","origin","isBusy","size","affiliateRate","registerBlockType","metadata","name","edit"],"sourceRoot":""}